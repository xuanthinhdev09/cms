(dp1
S'output'
p2
S"<type 'exceptions.ImportError'> Cannot import module 'applications.cms.modules.requests'"
p3
sS'layer'
p4
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers/plugin_app.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n \napi_link = \'https://quanly.ghephang.com/gh\'\nimport gluon.contrib.simplejson\n\n\n@auth.requires_login()\ndef index():\n\treturn dict(content=H2(\'Plugin App\'))\n\ndef lead_add():\n\timport requests\n\turl = \'%s/apiweb/lead_add.json\' % (api_link)\n\tdata = {\n\t\t"name": request.vars.fname,\n\t\t"phone": request.vars.fphone,\n\t\t"description": request.vars.fdes,\n\t\t"lead_type": 0,\n\t\t"lead_source": \'web\',\n\t\t \n\t}\n\ttry:\n\t\tx = requests.get(url, json=data)\n\t\treturn DIV(x.text,_style=" min-height: 415px;    text-align: center;    width: 100%;    display: block;    line-height: 400px;")\n\texcept: return DIV(\'Kh\xc3\xb4ng th\xe1\xbb\x83 k\xe1\xba\xbft n\xe1\xbb\x91i t\xe1\xbb\x9bi h\xe1\xbb\x87 th\xe1\xbb\x91ng\',_style=" min-height: 415px;    text-align: center;    width: 100%;    display: block;    line-height: 400px;")\n\t\n\t\ndef get_orders():\n\ttry:\n\t\timport requests\n\t\turl = \'%s/api_v1/get_orders.json?list_order=%s\'%(api_link,request.vars.fname.replace(\'DH\',\'\').replace(\' \',\'\').replace(\'\t\',\'\'))\n\t\theaders = {\'Content-Type\': \'application/json; charset=UTF-8\'}\n\t \n\t\tr_content = requests.get(url).json()\n\t\t\n\t\tdiv = DIV(_class="trackingItem")\n\t\tfor item in r_content[\'result\']:\n\t\t\tif item[\'status\']:\n\t\t\t\tdivt = DIV(_class="row mt-3 item")\n\t\t\t\tdivt.append(H4(\'TH\xc3\x94NG TIN V\xe1\xba\xacN \xc4\x90\xc6\xa0N \',_class="title_box"))\n\t\t\t\t\n\t\t\t\td1 = DIV(_class="col-md-6")\n\t\t\t\td1.append(DIV(DIV(\' M\xc3\xa3 phi\xe1\xba\xbfu g\xe1\xbb\xadi: \',_class="text-left"),DIV(\'DH\', item[\'order_code\'],_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\td1.append(DIV(DIV(DIV(\'  Ng\xc6\xb0\xe1\xbb\x9di g\xe1\xbb\xadi:  \',_class="text-left"),DIV(item[\'data\'][\'customer_send\'][\'name\'],_class="text-left bold"),_class="d-flex justify-content-between" )))\n\t\t\t\td1.append(DIV(DIV(\'  \xc4\x90\xe1\xbb\x8ba ch\xe1\xbb\x89 g\xe1\xbb\xadi:  \',_class="text-left"),DIV(\'*** \',item[\'data\'][\'customer_send\'][\'district_name\'],\', \',item[\'data\'][\'customer_send\'][\'city_name\'] ,_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\td1.append(DIV(DIV(\'  Ng\xc6\xb0\xe1\xbb\x9di nh\xe1\xba\xadn:  \',_class="text-left"),DIV(item[\'data\'][\'customer_receive\'][\'name\'],_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\td1.append(DIV(DIV(\'  \xc4\x90\xe1\xbb\x8ba ch\xe1\xbb\x89 nh\xe1\xba\xadn:  \',_class="text-left"),DIV(\'*** \',item[\'data\'][\'customer_receive\'][\'district_name\'],\', \',item[\'data\'][\'customer_receive\'][\'city_name\'] ,_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\tdivt.append(d1)\n\n\t\t\t\td2 = DIV(_class="col-md-6")\n\t\t\t\td2.append(DIV(DIV(\' Kh\xe1\xbb\x91i l\xc6\xb0\xe1\xbb\xa3ng (Kg): \',_class="text-left"),DIV(item[\'data\'][\'order_mass\'],_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\td2.append(DIV(DIV(\'  D\xe1\xbb\x8bch v\xe1\xbb\xa5:  \',_class="text-left"),DIV(item[\'data\'][\'n_order_delivery_method\'],_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\td2.append(DIV(DIV(\'  Tr\xe1\xba\xa1ng th\xc3\xa1i:  \',_class="text-left"),DIV(item[\'data\'][\'n_order_status_name\'],_class="text-left bold"),_class="d-flex justify-content-between" ))\n\t\t\t\t\n\t\t\t\tdivt.append(d2)\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tdiv_log = DIV(_class=\'trackingItem mt-3 p-4\')\n\t\t\t \n\t\t\t\tfor tracking in item[\'data\'][\'log_tracking\']:\n\t\t\t\t\tul  = UL(_class="timeline pb-3")\n\t\t\t\t\tul.append(LI(SPAN(tracking[\'time_stamp\'],_class=\'txt-color-red \'),DIV(tracking[\'description\']) ,_class="event"))\n\t\t\t\t\tdiv_log.append(ul)\t\n\t\t\t\tdivt.append(div_log)\n\t\t\t\tdiv.append(divt)\n\t\t\telse:\n\t\t\t\tdiv.append(DIV(H4(\'Kh\xc3\xb4ng t\xc3\xacm \xc4\x91\xc6\xb0\xe1\xbb\xa3c th\xc3\xb4ng tin m\xc3\xa3: %s \'%item[\'order_code\'].encode(\'utf-8\'),_class="title_box"),_class="row mt-3 item"))\n\t\treturn div\n\texcept Exception,e: return e\n \n\ndef get_location(id):\n\ttry:\n\t\timport requests\n\t\turl = \'%s/api_v1/location.json?list_order=%s\'%(api_link,request.vars.fname)\n\t\treturn requests.get(url).json()\n\texcept:\n\t\treturn {}\n\n\ndef location_jsadd():\n\tdiv = DIV()\n\turl = \'%s/api_v1/locations.json\'%api_link\n\tscript = SCRIPT("""\n\t\tvar citis = document.getElementById("city");\n\t\tvar district = document.getElementById("district");\n\t\tvar ward = document.getElementById("ward");\n\t\tvar url_link = "%s";\n\t\tvar Parameter = {\n\t\t\t url: url_link , \n\t\t     method: "GET", \n\t\t     headers: { \'Access-Control-Allow-Origin\': \'*\',  \'Content-Type\': \'application/json\',},\n\t\t};\n\t\t\n\t\tvar promise = axios(Parameter);\n\t\tpromise.then(function (result) {\n\t\t  renderCity(result.data);\n\t\t});\n\t\tfunction renderCity(data) {\n\t\t  for (const x of data) {\n\t\t\tcitis.options[citis.options.length] = new Option(x.name, x.id);\n\t\t  }\n\t\t  citis.onchange = function () {\n\t\t    district.length = 1;\n\t\t    ward.length = 1;\n\t\t    var p_dis = {\n\t\t      url: url_link +"?country=VN&parentId=" + citis.value,\n\t\t      method: "GET", \n\t\t    headers: { \'Access-Control-Allow-Origin\': \'*\',  \'Content-Type\': \'application/json\',},\n\t\t      \n\t\t    };\n\t\t    var promise_dis = axios(p_dis);\n\t\t    promise_dis.then(function (result) {\n\t\t      renderDis(result.data);\n\t\t    });\n\t\t  }\n\t\t}\n\t\tfunction renderDis(data) {\n\t\t  for (const x of data) {\n\t\t    district.options[district.options.length] = new Option(x.name, x.id);\n\t\t  }\n\t\t   district.onchange = function () {\n\t\t        ward.length = 1;\n\t\t    var p_ward = {\n\t\t      url: url_link +"?country=VN&parentId=" + district.value,\n\t\t      method: "GET", \n\t\t      headers: { \'Access-Control-Allow-Origin\': \'*\',  \'Content-Type\': \'application/json\',},\n\t\t    };\n\t\t    var promise_ward = axios(p_ward);\n\t\t     promise_ward.then(function (result) {\n\t\t      renderWard(result.data);\n\t\t    });\n\t\t  }\n\t\t}\n\t\tfunction renderWard(data) {\n\t\t  for (const x of data) {\n\t\t    ward.options[ward.options.length] = new Option(x.name, x.id);\n\t\t  }\n\t\t}\n\t\n\t$(\'#act_submit_ao\').click(function(){\n\t\tvar flagValidate = true;\n\t\tif(!$(\'#code\').val()){$(\'#errcode\').text(\'M\xc3\xa3 kho h\xc3\xa0ng kh\xc3\xb4ng \xc4\x91\xc6\xb0\xe1\xbb\xa3c \xc4\x91\xe1\xbb\x83 tr\xe1\xbb\x91ng\');flagValidate = false;}\n\t\tif(!$(\'#name\').val()){$(\'#errname\').text(\'T\xc3\xaan kho h\xc3\xa0ng kh\xc3\xb4ng \xc4\x91\xc6\xb0\xe1\xbb\xa3c \xc4\x91\xe1\xbb\x83 tr\xe1\xbb\x91ng\');flagValidate = false;}\n\t\tif(!$(\'#address\').val()){$(\'#erraddress\').text(\'\xc4\x90\xe1\xbb\x8ba ch\xe1\xbb\x89 kh\xc3\xb4ng \xc4\x91\xc6\xb0\xe1\xbb\xa3c \xc4\x91\xe1\xbb\x83 tr\xe1\xbb\x91ng\');flagValidate = false;}\n\t\tif(flagValidate){$("#act_submit").trigger(\'click\');}\n\t});\n\t$(\'.closemodals\').attr({\'data-dismiss\':\'modal\'});\n\t""" % (url))\n\tdiv.append(INPUT(_id=\'city\',_name=\'city\'))\n\tdiv.append(INPUT(_id=\'district\',_name=\'district\'))\n\tdiv.append(script)\n\t\n\treturn div\n\n\n\n##########################################################\n# WIDGET SELECT2\n##########################################################\n\ndef select2():\n\tcontent = SELECT(OPTION("Select .....", _selected=True), _name="select2", _class="select2", _id="select2")\n\treturn dict(content=content)\n\n\ndef get_select2():\n\ttry:\n\t\tq = request.vars.q\n\t\ttable = cms.define_table(request.args(0))\n\t\tfield = request.args(1)\n\t\tdb = cms.db\n\t\tresults = []\n\t\trows = db(table[field].contains(q)).select(table.id, table[field], limitby=(0, 30), orderby=table[field])\n\t\tfor row in rows:\n\t\t\tresults.append(dict(id=row.id, text=row[field]))\n\t\treturn gluon.contrib.simplejson.dumps(results)\n\texcept Exception, e:\n\t\tprint e\n\t\treturn ""\n\n\ndef widget_select_loca():\n\tfrom plugin_app import widget_select_loca\n\treturn widget_select_loca(city=request.vars.city, dist=request.vars.dist, street=request.vars.street)\n\n\n##########################################################\n# WIDGET\n##########################################################\n\ndef get_signer():\n\tfrom database import define_table\n\tdefine_table(db, auth, \'signer\')\n\tif request.vars.org:\n\t\torgs = request.vars.org\n\t\tif isinstance(orgs, str): orgs = [orgs]\n\t\torgs = [int(org) for org in orgs]\n\t\trows = db(db.signer.org.belongs(orgs)).select(orderby=db.signer.position)\n\t\toptions = [OPTION(row.name + \' [\' + row.post.name + \']\', _value=row.id) for row in rows]\n\telse:\n\t\toptions = []\n\tselect = SELECT(options, _name=\'signer\', _id=\'archives_signer\', _multiple=(len(orgs) > 1))\n\treturn select\n\n\n##########################################################\n# TreeView\n##########################################################\n@auth.requires_login()\ndef treedepth():\n\tfrom plugin_app import get_tree\n\tattr = {}\n\tfor key in request.vars.keys(): attr[key] = request.vars[key]\n\tattr[\'depth\'] = 1\n\tselected = attr.get(\'selected\', [])\n\tselected = [int(id) for id in selected]\n\tattr[\'selected\'] = selected\n\ttree = get_tree(db, auth, request.args(0), parent=int(request.args(1)), **attr)\n\treturn tree\n\n\n##########################################################\n# DropDown\n##########################################################\n@auth.requires_login()\ndef create_dropdown():\n\ttable, field = request.args(0).split(\'.\')\n\tcms.define_table(table)\n\trefereed = db[table][field].type[10:] if db[table][field].type[:9] == \'reference\' else db[table][field].type[15:]\n\tdb[table][field].requires = IS_IN_DB(db, refereed + \'.id\', \'%(name)s\')\n\tfrom gluon.tools import Crud\n\tcrud = Crud(cms.db)\n\tcms.define_table(refereed)\n\tform = crud.create(db[refereed])\n\tif form.vars.id: session[\'_plugin_dropbox:%s\' % request.args(0)] = form.vars.id\n\toptions = UL(*[LI(v) for k, v in db[table][field].requires.options() if k == str(form.vars.id)])\n\treturn dict(form=form, options=options)\n\n\ndef select_dropdown():\n\tif not auth.user_id or not session.get(\'_plugin_dropbox:%s\' % request.args(0), None): raise HTTP(400)\n\ttable, field = request.args(0).split(\'.\')\n\tdb = cms.db\n\tcms.define_table(table)\n\tif db[table][field].type[:9] == \'reference\':\n\t\trefereed = db[table][field].type[10:]\n\t\tmultiple = False\n\telse:\n\t\trefereed = db[table][field].type[15:]\n\t\tmultiple = True\n\tdb[table][field].requires = IS_IN_DB(db, refereed + \'.id\', \'%(name)s\', multiple=multiple)\n\treturn TAG[\'\'](*[OPTION(v, _value=k, _selected=(k == str(session[\'_plugin_dropbox:%s\' % request.args(0)]))) \\\n\t\tfor k, v in db[table][field].requires.options()])\n\n\ndef get_items():\n\titms = []\n\tif request.vars.q and request.vars.table and request.vars.field:\n\t\tq = request.vars.q\n\t\tf = request.vars.field\n\t\tt = request.vars.table\n\t\tfld = db[t][f]\n\t\trows = db(fld.upper().like(q.upper() + "%")).select(fld, distinct=True)\n\t\titms = [str(t[f]) for t in rows]\n\treturn \'\\n\'.join(itms)\n\n\ndef get_name():\n\titms = []\n\tfrom plugin_cms import Cms\n\tcms = Cms()\n\tif request.vars.q and request.vars.table and request.vars.field:\n\t\tq = request.vars.q\n\t\tf = request.vars.field\n\t\tt = request.vars.table\n\t\ttry:\n\t\t\tdtable = eval(\'cms.define_table("%s",True)\' % t)\n\n\t\t\trows = cms.db(dtable[f].upper().like("%" + q.upper() + "%")).select(dtable[f], distinct=True)\n\t\t\tfor r in rows:\n\t\t\t\titms.append(r[f])\n\t\texcept Exception, e:\n\t\t\tprint e\n\treturn \'\\n\'.join(itms)\n\n\ndef get_chuc_vu():\n\ttry:\n\t\tfrom plugin_process import Process\n\n\t\tarchives = Process().cms.define_table(\'archives\')\n\t\trow = Process().cms.db(archives.user_signed == request.vars.user_signed).select().last()\n\t\tif row:\n\t\t\treturn INPUT(_class="string form-control ac_input", _id="archives_user_office", _name="user_office", _type="text", _autocomplete="off", _value=row.user_office)\n\t\telse:\n\t\t\treturn INPUT(_class="string form-control ac_input", _id="archives_user_office", _name="user_office", _type="text", _autocomplete="off", _value=\'\')\n\texcept Exception, e:\n\t\tprint e\n\n\ndef get_co_quan():\n\ttry:\n\t\tfrom plugin_process import Process\n\n\t\tarchives = Process().cms.define_table(\'archives\')\n\t\trow = Process().cms.db(archives.user_signed == request.vars.user_signed).select().last()\n\t\tif row:\n\t\t\treturn INPUT(_class="string form-control ac_input", _id="archives_org_publish", _name="org_publish", _type="text", _autocomplete="off", _value=row.org_publish)\n\t\telse:\n\t\t\treturn INPUT(_class="string form-control ac_input", _id="archives_org_publish", _name="org_publish", _type="text", _autocomplete="off", _value=\'\')\n\texcept Exception, e:\n\t\tprint e\n\n\n# def add_hoi_dap():\n# from plugin_cms import Cms\n# from plugin_cms import CmsFolder\n# cms = Cms()\n# hoi_dap = cms.define_table(\'hoi_dap\')\n# id = cms.db.hoi_dap.insert(folder=request.args(0),name=request.vars.name,description=request.vars.description,nguoi_hoi=request.vars.nguoi_hoi,dien_thoai=request.vars.dien_thoai,email=request.vars.email)\n# if id:\n# from plugin_process import ProcessModel\n# objects = ProcessModel().define_objects()\n# objects_id = objects.insert(folder=request.args(0),foldername=\'hoi_dap\',tablename=\'hoi_dap\',table_id=id,auth_group=7,process=21)\n# print objects_id\n\n# div = DIV(B(\'G\xe1\xbb\xadi c\xc3\xa2u h\xe1\xbb\x8fi th\xc3\xa0nh c\xc3\xb4ng!\'),_class=\'bg-info text-center\' )\n# div.append(DIV(BR(),\'Chuy\xe1\xbb\x83n h\xc6\xb0\xe1\xbb\x9bng sau 3 gi\xc3\xa2y.\',_class=\'bg-info text-center\' ))\n# scr =\'\'\'\n# <META http-equiv="refresh" content="3;URL=%s">\n# \'\'\'%(URL(c=\'portal\',f=\'folder\',args=[\'hoi-dap\']))\n# div.append(XML(scr))\n# return div\n\ndef add_hoi_dap():\n\tfrom plugin_cms import Cms\n\tcms = Cms()\n\thoi_dap = cms.define_table(\'hoi_dap\')\n\tif not request.vars.name:\n\t\treturn DIV(B(\'B\xe1\xba\xa1n ch\xc6\xb0a nh\xe1\xba\xadp ti\xc3\xaau \xc4\x91\xe1\xbb\x81 c\xc3\xa2u h\xe1\xbb\x8fi\'), _class=\'bg-do text-center\')\n\tif not request.vars.description:\n\t\treturn DIV(B(\'B\xe1\xba\xa1n ch\xc6\xb0a nh\xe1\xba\xadp c\xc3\xa2u h\xe1\xbb\x8fi\'), _class=\'bg-do text-center\')\n\tif not request.vars.nguoi_hoi:\n\t\treturn DIV(B(\'B\xe1\xba\xa1n ch\xc6\xb0a nh\xe1\xba\xadp h\xe1\xbb\x8d t\xc3\xaan\'), _class=\'bg-do text-center\')\n\tif not request.vars.dien_thoai:\n\t\treturn DIV(B(\'B\xe1\xba\xa1n ch\xc6\xb0a nh\xe1\xba\xadp s\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i\'), _class=\'bg-do text-center\')\n\n\tid = cms.db.hoi_dap.insert(folder=request.args(0), name=request.vars.name, description=request.vars.description, email=request.vars.email, dien_thoai=request.vars.dien_thoai, nguoi_hoi=request.vars.nguoi_hoi)\n\tif id:\n\t\tfrom plugin_process import ProcessModel\n\t\tobjects = ProcessModel().define_objects()\n\t\tobjects_id = objects.insert(folder=request.args(0), foldername=\'hoi-dap\', tablename=\'hoi_dap\', table_id=id, auth_group=8, process=36)\n\tdiv = DIV(B(\'G\xe1\xbb\xadi c\xc3\xa2u h\xe1\xbb\x8fi th\xc3\xa0nh c\xc3\xb4ng!\'), _class=\'bg-info text-center\')\n\treturn div\n\n\ndef add_h_comment():\n\tfrom plugin_cms import Cms\n\tcms = Cms()\n\th_comment = cms.define_table(\'h_comment\')\n\tif (request.vars.name != \'\') & (request.vars.description != \'\'):\n\t\tid = cms.db.h_comment.insert(folder=15, name=request.vars.name, description=request.vars.description, email=request.vars.email, tablename=request.args(1), tableid=request.args(2))\n\telse:\n\t\treturn DIV(B(\'Ch\xc6\xb0a nh\xe1\xba\xadp \xc4\x91\xe1\xbb\xa7 c\xc3\xa1c tr\xc6\xb0\xe1\xbb\x9dng d\xe1\xbb\xaf li\xe1\xbb\x87u!\'), _class=\'bg-info text-center\')\n\tif id:\n\t\tfrom plugin_process import ProcessModel\n\t\tobjects = ProcessModel().define_objects()\n\t\tobjects_id = objects.insert(folder=15, foldername=\'binh-luan-tin-tuc\', tablename=\'h_comment\', table_id=id, auth_group=8, process=31)\n\t\tprint objects_id\n\tdiv = DIV(B(\'G\xe1\xbb\xadi b\xc3\xacnh lu\xe1\xba\xadn th\xc3\xa0nh c\xc3\xb4ng!\'), _class=\'bg-info text-center\')\n\treturn div\n\n\ndef search():\n\tfolder = "ban-nha-dat"\n\tif request.vars.folder:\n\t\tfolder = request.vars.folder\n\tvars = dict()\n\tif request.vars.city and (request.vars.city != \'0\'):\n\t\tvars[\'city\'] = request.vars.city\n\n\tif request.vars.dist and (request.vars.dist != \'0\'):\n\t\tvars[\'dist\'] = request.vars.dist\n\n\tif request.vars.street and (request.vars.street != \'0\'):\n\t\tvars[\'street\'] = request.vars.street\n\n\tif request.vars.trend and (request.vars.trend != \'0\'):\n\t\tvars[\'trend\'] = request.vars.trend\n\n\tif request.vars.group_price and (request.vars.group_price != \'0\'):\n\t\tvars[\'group_price\'] = request.vars.group_price\n\tredirect(URL(c=request.vars.folder, vars=vars))\n\n\ndef test():\n\tfrom plugin_app import mony_format\n\treturn mony_format(request.args(0))\n\n\ndef update_cookies():\n\tif request.vars[request.args(0)]:\n\t\tresponse.cookies[request.args(0)] = request.vars[request.args(0)].replace(\'/\', \'\')\n\t\tresponse.cookies[request.args(0)][\'expires\'] = 24 * 3600\n\t\tresponse.cookies[request.args(0)][\'path\'] = \'/\'\n\treturn portlet.display(136)\n\n\ndef dia_ban():\n\tv_tinh = request.vars.tinh or 3\n\tv_huyen = request.vars.huyen or 0\n\tv_xa = request.vars.xa or 0\n\n\td_tinh = cms.define_table(\'d_tinh\')\n\td_huyen = cms.define_table(\'d_huyen\')\n\td_xa = cms.define_table(\'d_xa\')\n\n\ttinhs = db(db.d_tinh.status == True).select()\n\toptions_tinh = []\n\tfor t in tinhs:\n\t\tif v_tinh:\n\t\t\tif t.id == int(v_tinh):\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id, _selected=\'selected\'))\n\t\t\telse:\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id))\n\t\telse:\n\t\t\tif t.id == int(29):\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id, _selected=\'selected\'))\n\t\t\telse:\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id))\n\n\tdiv = DIV(_id=\'dia_ban\')\n\tajax = "ajax(\'%s\',[\'tinh\',\'huyen\',\'xa\'],\'dia_ban\')" % URL(c=\'plugin_app\', f=\'dia_ban\')\n\tdiv.append(DIV(SELECT(options_tinh, _name=\'tinh\', _id=\'d_tinh\', _class="select2 vantai_select2", _onchange=ajax), _class=\' col-md-4\'))\n\thuyen_first = 0\n\ttry:\n\t\tif v_tinh != 0:\n\t\t\thuyens = db((db.d_huyen.status == True) & (db.d_huyen.d_tinh == v_tinh)).select()\n\t\t\t# L\xe1\xba\xa5y danh s\xc3\xa1ch huy\xe1\xbb\x87n\n\t\t\toptions_huyen = []\n\t\t\tif len(huyens) > 0: huyen_first = huyens[0].id\n\t\t\tfor h in huyens:\n\t\t\t\tif str(h.id) == v_huyen:\n\t\t\t\t\toptions_huyen.append(OPTION(h.name, _value=h.id, _selected=\'selected\'))\n\t\t\t\telse:\n\t\t\t\t\toptions_huyen.append(OPTION(h.name, _value=h.id))\n\t\t\tdiv.append(DIV(SELECT(options_huyen, _name=\'huyen\', _id=\'d_huyen\', _class="select2 vantai_select2", _onchange=ajax), _class=\' col-md-4\'))\n\t\telse:\n\t\t\thuyens = db((db.d_huyen.status == True) & (db.d_huyen.d_tinh == 29)).select()\n\t\t\t# L\xe1\xba\xa5y danh s\xc3\xa1ch huy\xe1\xbb\x87n\n\t\t\tif len(huyens) > 0: huyen_first = huyens[0].id\n\t\t\toptions_huyen = []\n\t\t\tfor h in huyens:\n\t\t\t\tif str(h.id) == v_huyen:\n\t\t\t\t\toptions_huyen.append(OPTION(h.name, _value=h.id, _selected=\'selected\'))\n\t\t\t\telse:\n\t\t\t\t\toptions_huyen.append(OPTION(h.name, _value=h.id))\n\t\t\tdiv.append(DIV(SELECT(options_huyen, _name=\'huyen\', _id=\'d_huyen\', _class="select2 vantai_select2", _onchange=ajax), _class=\' col-md-4\'))\n\t# div.append(SELECT([OPTION("C\xe1\xba\xa7n ch\xe1\xbb\x8dn huy\xe1\xbb\x87n",_value=0)],_name=\'huyen\',_id=\'d_huyen\',_class="select2 vantai_select2",_onchange=ajax))\n\texcept Exception, e:\n\t\treturn e\n\n\ttry:\n\t\tif v_huyen != 0:\n\t\t\txas = db((db.d_xa.status == True) & (db.d_xa.d_huyen == v_huyen)).select()\n\n\t\t\toptions_xa = []\n\t\t\tfor x in xas:\n\t\t\t\tif str(x.id) == v_xa:\n\t\t\t\t\toptions_xa.append(OPTION(x.name, _value=x.id, _selected=\'selected\'))\n\t\t\t\telse:\n\t\t\t\t\toptions_xa.append(OPTION(x.name, _value=x.id))\n\t\t\tdiv.append(DIV(SELECT(options_xa, _name=\'xa\', _id=\'d_xa\', _class="select2 vantai_select2"), _class=\' col-md-4\'))\n\t\telse:\n\t\t\tif huyen_first != 0:\n\t\t\t\txas = db((db.d_xa.status == True) & (db.d_xa.d_huyen == huyen_first)).select()\n\t\t\t\toptions_xa = []\n\t\t\t\tfor x in xas:\n\t\t\t\t\tif str(x.id) == v_xa:\n\t\t\t\t\t\toptions_xa.append(OPTION(x.name, _value=x.id, _selected=\'selected\'))\n\t\t\t\t\telse:\n\t\t\t\t\t\toptions_xa.append(OPTION(x.name, _value=x.id))\n\t\t\t\tdiv.append(DIV(SELECT(options_xa, _name=\'xa\', _id=\'d_xa\', _class="select2 vantai_select2"), _class=\' col-md-4\'))\n\t\t\telse:\n\t\t\t\tdiv.append(DIV(SELECT([OPTION("C\xe1\xba\xa7n ch\xe1\xbb\x8dn x\xc3\xa3", _value=0)], _name=\'xa\', _id=\'d_xa\', _class="select2 vantai_select2"), _class=\' col-md-4\'))\n\texcept Exception, e:\n\t\tdiv.append(DIV(e))\n\tdiv.append(XML("""\n\t\t<script type="text/javascript">\n\t\t$(document).ready(function(){\n\t\t\t$(".vantai_select2").select2({\n\t\t\t\tplaceholder: "Ch\xe1\xbb\x8dn d\xe1\xbb\xaf li\xe1\xbb\x87u ...",\n\t\t\t\tallowClear: true\n\t\t\t});\n\n\t\t});\n\t\t</script>\n\t"""))\n\treturn div\n\n\ndef d_tinh():\n\tv_tinh = request.vars.tinh or 3\n\n\td_tinh = cms.define_table(\'d_tinh\')\n\n\ttinhs = db(db.d_tinh.status == True).select()\n\toptions_tinh = []\n\tfor t in tinhs:\n\t\tif v_tinh:\n\t\t\tif t.id == int(v_tinh):\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id, _selected=\'selected\'))\n\t\t\telse:\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id))\n\t\telse:\n\t\t\tif t.id == int(29):\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id, _selected=\'selected\'))\n\t\t\telse:\n\t\t\t\toptions_tinh.append(OPTION(t.name, _value=t.id))\n\n\tdiv = DIV(_id=\'dia_ban\')\n\tdiv.append(DIV(SELECT(options_tinh, _name=\'d_tinh\', _id=\'d_tinh\', _class="select2 vantai_select2")))\n\n\tdiv.append(XML("""\n\t\t<script type="text/javascript">\n\t\t$(document).ready(function(){\n\t\t\t$(".vantai_select2").select2({\n\t\t\t\tplaceholder: "Ch\xe1\xbb\x8dn d\xe1\xbb\xaf li\xe1\xbb\x87u ...",\n\t\t\t\tallowClear: true\n\t\t\t});\n\n\t\t});\n\t\t</script>\n\t"""))\n\treturn div\n\n\n# Form full th\xc3\xb4ng tin\n# def form_add_salesman():\n# form = DIV(H4("TH\xc3\x94NG TIN \xc4\x90\xc4\x82NG K\xc3\x9d \xc4\x90\xe1\xba\xa0I L\xc3\x9d",_class=\'text-center\'),_id=\'dang_ky_salesman\')\n# form.append(P("Vui l\xc3\xb2ng nh\xe1\xba\xadp th\xc3\xb4ng tin ch\xc3\xadnh x\xc3\xa1c \xc4\x91\xe1\xbb\x83 \xc4\x91\xe1\xba\xa3m b\xe1\xba\xa3o quy\xe1\xbb\x81n l\xe1\xbb\xa3i cho \xc4\x91\xe1\xba\xa1i l\xc3\xbd.",_class=\'text-center margin_bottom30\'))\n\n# ajax = "ajax(\'%s\', [\'doi_nhom\'], \'check_code_name\')"%(URL(c=\'plugin_app\',f=\'check_code_name\'))\n# div3 = DIV(LABEL("M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u"),_class="form-group col-md-4")\n# div3.append(DIV(INPUT(_type=\'text\',_class="form-control",_name=\'doi_nhom\',_placeholder=" Nh\xe1\xba\xadp m\xc3\xa3  ",_id=\'auth_name\',_onfocusout=ajax,_value=request.vars.doi_nhom if request.vars.doi_nhom else \'\')))\n# div3.append(DIV(_id=\'check_code_name\',_class=\'div_alert\'))\n\n# form.append(DIV(div3,_class=\'row\'))\n\n# div1 = DIV(LABEL("H\xe1\xbb\x8d v\xc3\xa0 t\xc3\xaan"),_class="form-group col-md-4")\n# div1.append(INPUT(_type=\'text\',_class="form-control",_name=\'name\',_id=\'name\'))\n\n# div2 = DIV(LABEL("Ng\xc3\xa0y sinh"),_class="form-group col-md-6")\n# div2.append(INPUT(_type=\'text\',_class="form-control date",_name=\'birthday\',_id=\'birthday\',_placeholder="../../.."))\n\n# gioi_tinh = SELECT(_name=\'sex\',_id=\'sex\',_class="select2 gioi_tinh_select2")\n# gioi_tinh.append(OPTION("Nam" ,_value="Nam"))\n# gioi_tinh.append(OPTION("N\xe1\xbb\xaf" ,_value="N\xe1\xbb\xaf"))\n\n# div4 = DIV(LABEL("Gi\xe1\xbb\x9bi t\xc3\xadnh"),_class="form-group col-md-6")\n# div4.append(gioi_tinh)\n\n\n# div_gr = DIV(DIV(div2,div4,_class=\'row\'),_class="form-group col-md-4")\n\n# ajax = "ajax(\'%s\', [\'auth_name\'], \'check_auth_user\')"%(URL(c=\'plugin_app\',f=\'check_auth_user\'))\n# div3 = DIV(LABEL("T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp"),_class="form-group col-md-4")\n# div3.append(DIV(INPUT(_type=\'text\',_class="form-control",_name=\'auth_name\',_placeholder=" Vi\xe1\xba\xbft li\xe1\xbb\x81n, kh\xc3\xb4ng d\xe1\xba\xa5u ",_id=\'auth_name\',_onfocusout=ajax)))\n# div3.append(DIV(_id=\'check_auth_user\',_class=\'div_alert\'))\n\n# form.append(DIV(div3,div1,div_gr,_class=\'row\'))\n\n# ajax = "ajax(\'%s\', [\'phone\'], \'check_phone\')"%(URL(c=\'plugin_app\',f=\'check_phone\'))\n# div1 = DIV(LABEL("S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i"),_class="form-group col-md-4")\n# div1.append(INPUT(_type=\'text\',_class="form-control",_name=\'phone\',_placeholder="091...",_id=\'phone\',_onfocusout=ajax))\n# div1.append(DIV(_id=\'check_phone\',_class=\'div_alert\'))\n\n# div2 = DIV(LABEL("Email"),_class="form-group col-md-4")\n# div2.append(INPUT(_type=\'text\',_class="form-control",_name=\'email\',_id=\'email\',_placeholder="Email"))\n\n# div3 = DIV(LABEL("\xc4\x90\xe1\xbb\x8ba ch\xe1\xbb\x89"),_class="form-group col-md-4")\n# div3.append(d_tinh())\n\n# form.append(DIV(div1,div2,div3,_class=\'row\'))\n\n\n# div1 = DIV(LABEL("C\xc4\x83n C\xc6\xb0\xe1\xbb\x9bc/Passport"),_class="form-group col-md-4")\n# div1.append(INPUT(_type=\'text\',_class="form-control",_name=\'id_card\',_id=\'id_card\'))\n\n# div2 = DIV(LABEL("Ng\xc3\xa0y c\xe1\xba\xa5p"),_class="form-group col-md-4")\n# div2.append(INPUT(_type=\'text\',_class="form-control date",_name=\'id_day\',_id=\'id_day\',_placeholder="../../...."))\n\n# div3 = DIV(LABEL("N\xc6\xa1i c\xe1\xba\xa5p"),_class="form-group col-md-4")\n# div3.append(INPUT(_type=\'text\',_class="form-control",_name=\'id_by\',_id=\'id_by\'))\n\n# form.append(DIV(div1,div2,div3,_class=\'row\'))\n\n\n# # div1 = DIV(_class="form-group")\n# # div1.append(TEXTAREA(_class="form-control",_rows="3",_name=\'description\',_placeholder="L\xe1\xbb\x9di nh\xe1\xba\xafn",_style="width: 100%; "))\n# # form.append(div1)\n\n# div_dk = DIV("T\xc3\xb4i \xc4\x91\xe1\xbb\x93ng \xc3\xbd t\xe1\xba\xa5t c\xe1\xba\xa3 ",A(\'\xc4\x90i\xe1\xbb\x81u kho\xe1\xba\xa3n \xc4\x91\xe1\xba\xa1i l\xc3\xbd\'),\' v\xc3\xa0 \',A(\'Ch\xc3\xadnh s\xc3\xa1ch b\xe1\xba\xa3o m\xe1\xba\xadt\'),\' c\xe1\xbb\xa7a Naso\')\n# form.append(DIV(INPUT(_type=\'checkbox\',_style="float: left;margin-right: 15px;",_name=\'dieu_khoan\',_id=\'dieu_khoan\',_value=\'da_check\'),div_dk,_class=" col-md-12",_style="line-height: 51px;"))\n\n# form.append(DIV(_id=\'dang_ky_salesman_alert\'))\n\n# ajax = "ajax(\'%s\', [\'auth_name\',\'name\',\'birthday\',\'sex\',\'email\',\'phone\',\'d_tinh\' ,\'id_card\',\'id_day\',\'id_by\',\'dieu_khoan\'], \'dang_ky_salesman_alert\')"%(URL(c=\'plugin_app\',f=\'dang_ky_salesman\',vars=request.vars))\n\n# form.append(DIV(A(I(_class=\'fa fa-caret-right\'),\' \xc4\x90\xc4\x82NG K\xc3\x9d \',_onclick=ajax, _class=\'btn btn-success  btn_naso\',_id=\'btn_dangky\'),_class=\'text-center\'))\n\n# scr= \'\'\'\n# <script>\n\n\n# $(\'#auth_name\').on(\'keypress\', function (event) {\n# var regex = new RegExp("^[a-zA-Z0-9]+$");\n# var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\n# if (!regex.test(key)) {\n# event.preventDefault();\n# return false;\n# }\n# });\n# $(\'#phone\').on(\'keypress\', function (event) {\n# var regex = new RegExp("^[0-9]+$");\n# var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\n# if (!regex.test(key)) {\n# event.preventDefault();\n# return false;\n# }\n# });\n# </script>\n# \'\'\'\n# form.append(XML(scr))\n# return form\n\ndef form_add_salesman():\n\tform = DIV(H4("TH\xc3\x94NG TIN \xc4\x90\xc4\x82NG K\xc3\x9d \xc4\x90\xe1\xba\xa0I L\xc3\x9d", _class=\'text-center\'), _id=\'dang_ky_salesman\')\n\tform.append(P("Vui l\xc3\xb2ng nh\xe1\xba\xadp th\xc3\xb4ng tin ch\xc3\xadnh x\xc3\xa1c \xc4\x91\xe1\xbb\x83 \xc4\x91\xe1\xba\xa3m b\xe1\xba\xa3o quy\xe1\xbb\x81n l\xe1\xbb\xa3i cho \xc4\x91\xe1\xba\xa1i l\xc3\xbd.", _class=\'text-center margin_bottom30\'))\n\n\t# M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u\n\tajax = "ajax(\'%s\', [\'doi_nhom\'], \'check_code_name\')" % (URL(c=\'plugin_app\', f=\'check_code_name\'))\n\tdiv1 = DIV(_class="form-group")\n\tdiv1.append(DIV(INPUT(_type=\'text\', _class="form-control", _name=\'doi_nhom\', _placeholder=" Nh\xe1\xba\xadp m\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u ", _id=\'name_code\', _onfocusout=ajax, _value=request.vars.doi_nhom if request.vars.doi_nhom else \'\')))\n\tdiv1.append(DIV(_id=\'check_code_name\', _class=\'div_alert\'))\n\n\t# H\xe1\xbb\x8d v\xc3\xa0 t\xc3\xaan\n\tdiv2 = DIV(_class="form-group")\n\tdiv2.append(INPUT(_type=\'text\', _class="form-control", _name=\'name\', _id=\'name\', _placeholder="H\xe1\xbb\x8d v\xc3\xa0 t\xc3\xaan"))\n\tdiv2.append(DIV(_id=\'check_code_name\', _class=\'div_alert\'))\n\n\t# T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp\n\tajax = "ajax(\'%s\', [\'auth_name\'], \'check_auth_user\')" % (URL(c=\'plugin_app\', f=\'check_auth_user\'))\n\tdiv6 = DIV(_class="form-group")\n\tdiv6.append(DIV(INPUT(_type=\'text\', _class="form-control", _name=\'auth_name\', _placeholder="T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp ", _id=\'auth_name\', _onfocusout=ajax)))\n\tdiv6.append(DIV(_id=\'check_auth_user\', _class=\'div_alert\'))\n\n\t# S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i\n\tajax = "ajax(\'%s\', [\'phone\'], \'check_phone\')" % (URL(c=\'plugin_app\', f=\'check_phone\'))\n\tdiv7 = DIV(_class="form-group")\n\tdiv7.append(INPUT(_type=\'text\', _class="form-control", _name=\'phone\', _placeholder="\xc4\x90i\xe1\xbb\x87n tho\xe1\xba\xa1i", _id=\'phone\', _onfocusout=ajax))\n\tdiv7.append(DIV(_id=\'check_phone\', _class=\'div_alert\'))\n\n\t# Email\n\tajax = "ajax(\'%s\', [\'email\'], \'check_email\')" % (URL(c=\'plugin_app\', f=\'check_email\'))\n\tdiv8 = DIV(_class="form-group")\n\tdiv8.append(INPUT(_type=\'text\', _class="form-control", _name=\'email\', _id=\'email\', _placeholder="Email", _onfocusout=ajax))\n\tdiv8.append(DIV(_id=\'check_email\', _class=\'div_alert\'))\n\t# Khu v\xe1\xbb\xb1c\n\tdiv9 = DIV(_class="form-group")\n\tdiv9.append(d_tinh())\n\n\t# Pass 1\n\tajax = "ajax(\'%s\', [\'password\'], \'check_pass\')" % (URL(c=\'plugin_app\', f=\'check_pass\'))\n\tdiv10 = DIV(_class="form-group")\n\tdiv10.append(INPUT(_type=\'password\', _class="form-control", _name=\'password\', _id=\'password\', _placeholder="Nh\xe1\xba\xadp m\xe1\xba\xadt kh\xe1\xba\xa9u", _onfocusout=ajax))\n\tdiv10.append(DIV(_id=\'check_pass\', _class=\'div_alert\'))\n\t# Pass 2\n\tajax = "ajax(\'%s\', [\'password\',\'password2\'], \'check_pass2\')" % (URL(c=\'plugin_app\', f=\'check_pass2\'))\n\tdiv11 = DIV(_class="form-group")\n\tdiv11.append(INPUT(_type=\'password\', _class="form-control", _name=\'password2\', _id=\'password2\', _placeholder="Nh\xe1\xba\xadp l\xe1\xba\xa1i m\xe1\xba\xadt kh\xe1\xba\xa9u", _onfocusout=ajax))\n\tdiv11.append(DIV(_id=\'check_pass2\', _class=\'div_alert\'))\n\n\t# form.append(DIV(div1,div2,_class=\'row\'))\n\t# form.append(DIV(div6,div7,_class=\'row\'))\n\t# form.append(DIV(div10,div8,_class=\'row\'))\n\t# form.append(DIV(div11,div9,_class=\'row\'))\n\tdiv_left = DIV(div1, div6, div10, div11, _class=\'col-md-6\')\n\tdiv_right = DIV(div2, div7, div8, div9, _class=\'col-md-6\')\n\tform.append(DIV(div_left, div_right, _class=\'row\'))\n\n\tdiv_dk = DIV("T\xc3\xb4i \xc4\x91\xe1\xbb\x93ng \xc3\xbd t\xe1\xba\xa5t c\xe1\xba\xa3 ", A(\'\xc4\x90i\xe1\xbb\x81u kho\xe1\xba\xa3n \xc4\x91\xe1\xba\xa1i l\xc3\xbd\'), \' v\xc3\xa0 \', A(\'Ch\xc3\xadnh s\xc3\xa1ch b\xe1\xba\xa3o m\xe1\xba\xadt\'), \' c\xe1\xbb\xa7a Naso\')\n\tform.append(DIV(INPUT(_type=\'checkbox\', _style="float: left;    margin-right: 15px;    height: 19px;", _name=\'dieu_khoan\', _id=\'dieu_khoan\', _value=\'da_check\'), div_dk, _class=" col-md-12", _style="line-height: 25px;     margin-bottom: 15px;"))\n\n\tform.append(DIV(_id=\'dang_ky_salesman_alert\'))\n\n\tajax = "ajax(\'%s\', [\'auth_name\',\'name\',\'email\',\'phone\',\'d_tinh\' ,\'password\',\'password2\',\'dieu_khoan\'], \'dang_ky_salesman_alert\')" % (URL(c=\'plugin_app\', f=\'dang_ky_salesman\', vars=request.vars))\n\n\tform.append(DIV(A(I(_class=\'fa fa-caret-right\'), \' \xc4\x90\xc4\x82NG K\xc3\x9d \', _onclick=ajax, _class=\'btn btn-success  btn_naso\', _id=\'btn_dangky\'), _class=\'text-center\'))\n\n\tscr = \'\'\'\n\t<script>\n\t$(\'#auth_name\').on(\'keypress\', function (event) {\n\t\tvar regex = new RegExp("^[a-zA-Z0-9]+$");\n\t\tvar key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\n\t\tif (!regex.test(key)) {\n\t\t   event.preventDefault();\n\t\t   return false;\n\t\t}\n\t});\n\n\t$(\'#email\').on(\'keypress\', function (event) {\n\t\tvar regex = new RegExp("= /^(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;");\n\t\tvar key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\n\t\tif (!regex.test(key)) {\n\t\t   event.preventDefault();\n\t\t   return false;\n\t\t}\n\t});\n\t$(\'#phone\').on(\'keypress\', function (event) {\n\t\tvar regex = new RegExp("^[0-9]+$");\n\t\tvar key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\n\t\tif (!regex.test(key)) {\n\t\t   event.preventDefault();\n\t\t   return false;\n\t\t}\n\t});\n\t</script>\n\t\'\'\'\n\tform.append(XML(scr))\n\treturn form\n\n\n# Kh\xc3\xb4ng vi\xe1\xba\xbft scrip n\xc3\xaan b\xe1\xba\xaft l\xe1\xbb\x97i b\xe1\xba\xb1ng code\ndef check_code_name():\n\tsalesman = cms.define_table(\'salesman\')\n\tdoi_nhom = str(request.vars.doi_nhom)\n\tif doi_nhom == "": return SPAN("Naso s\xe1\xba\xbd t\xe1\xbb\xb1 ph\xc3\xa2n nh\xc3\xb3m n\xe1\xba\xbfu b\xe1\xba\xa1n \xc4\x91\xe1\xbb\x83 tr\xe1\xbb\x91ng", _class=\'warning\')\n\tuser_check = db(salesman.name_code == doi_nhom).count()\n\tif user_check > 0:\n\t\treturn \'\'\n\telse:\n\t\treturn SPAN("M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87", _class=\'warning\')\n\n\ndef check_pass():\n\tpassword = request.vars.password\n\tif len(password) < 8:\n\t\treturn SPAN("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n tr\xc3\xaan 8 k\xc3\xbd t\xe1\xbb\xb1", _class=\'warning\')\n\telif password.isalpha():\n\t\treturn SPAN("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n ch\xe1\xbb\xa9a c\xe1\xba\xa3 s\xe1\xbb\x91", _class=\'warning\')\n\telif password.isdigit():\n\t\treturn SPAN("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n ch\xe1\xbb\xa9a c\xe1\xba\xa3 ch\xe1\xbb\xaf", _class=\'warning\')\n\telse:\n\t\treturn ""\n\n\ndef check_pass2():\n\ttry:\n\t\tpassword = request.vars.password\n\t\tpassword2 = request.vars.password2\n\t\tif password == "":\n\t\t\treturn SPAN("B\xe1\xba\xa1n c\xe1\xba\xa7n nh\xe1\xba\xadp m\xe1\xba\xadt kh\xe1\xba\xa9u \xe1\xbb\x9f tr\xc3\xaan tr\xc6\xb0\xe1\xbb\x9bc", _class=\'warning\')\n\t\telif str(password) != str(password2):\n\t\t\treturn SPAN("B\xe1\xba\xa1n c\xe1\xba\xa7n nh\xe1\xba\xadp gi\xe1\xbb\x91ng m\xe1\xba\xadt kh\xe1\xba\xa9u tr\xc3\xaan", _class=\'warning\')\n\t\telse:\n\t\t\treturn ""\n\texcept Exception, e:\n\t\treturn e\n\n\ndef check_email():\n\tsalesman = cms.define_table(\'salesman\')\n\temail = request.vars.email\n\ttry:\n\t\tif (email == "") or (\'@\' not in email) or (\'.\' not in email): return SPAN("Email kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87", _class=\'warning\')\n\t\tuser_check = db(salesman.email == email).count()\n\t\tif user_check > 0:\n\t\t\treturn SPAN("Email \xc4\x91\xc3\xa3 \xc4\x91\xc4\x83ng k\xc3\xbd", _class=\'warning\')\n\t\telse:\n\t\t\treturn \'\'\n\texcept Exception, e:\n\t\treturn e\n\n\ndef check_phone():\n\tsalesman = cms.define_table(\'salesman\')\n\tphone = str(request.vars.phone)\n\tif len(phone) != 10: return SPAN("S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87", _class=\'warning\')\n\tuser_check = db(salesman.phone == phone).count()\n\tif user_check > 0:\n\t\treturn SPAN("S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i \xc4\x91\xc3\xa3 t\xe1\xbb\x93n t\xe1\xba\xa1i", _class=\'warning\')\n\telse:\n\t\treturn \'\'\n\n\ndef check_auth_user():\n\tauth_name = request.vars.auth_name\n\tif len(auth_name) < 6: return SPAN("T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp c\xe1\xba\xa7n d\xc3\xa0i h\xc6\xa1n 6 k\xc3\xbd t\xe1\xbb\xb1", _class=\'warning\')\n\tuser_check = db(db.auth_user.username == auth_name).count()\n\tif user_check > 0:\n\t\treturn SPAN("T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp \xc4\x91\xc3\xa3 t\xe1\xbb\x93n t\xe1\xba\xa1i", _class=\'warning\')\n\telse:\n\t\treturn \'\'\n\n\n# Th\xc3\xb4ng tin \xc4\x91\xe1\xba\xa1i l\xc3\xbd\ndef thong_tin_daily():\n\tsalesman = cms.define_table(\'salesman\')\n\tform = DIV(_id=\'dang_ky_salesman\')\n\tif request.vars.doi_nhom or request.vars.phone:\n\t\trow = db((salesman.name_code == request.vars.doi_nhom.replace(\' \', \'\')) | (salesman.phone == request.vars.phone)).select().first()\n\t\tif row:\n\n\t\t\tdiv = DIV(H4(\'\xc4\x90\xe1\xba\xa0I L\xc3\x9d GI\xe1\xbb\x9aI THI\xe1\xbb\x86U\', _class=\' margin_bottom30 text-center\'), _class=\'col-lg-5 col-md-offset-3\')\n\t\t\tdiv.append(IMG(_src=URL(c=\'static\', f=\'site/naso/uploads/salesman\', args=[row.avatar]), _class=\'col-lg-4\'))\n\t\t\tdiv.append(DIV(H2(row.name), P(\'\xc4\x90i\xe1\xbb\x87n tho\xe1\xba\xa1i: \', row.phone), _class=\'col-lg-8 margin_bottom30\'))\n\t\t\tajax = "ajax(\'%s\', [ ], \'dang_ky_salesman\')" % (URL(c=\'plugin_app\', f=\'form_add_salesman\', vars=dict(doi_nhom=row.name_code)))\n\t\t\tdiv4 = DIV(A(I(_class=\'fa fa-caret-right\'), \' \xc4\x90\xc4\x83ng k\xc3\xbd ngay \', _onclick=ajax, _class=\'btn btn-success  btn_naso\'), _class=\'text-center margin_top15\')\n\t\t\tdiv.append(DIV(div4))\n\n\t\t\tform.append(DIV(div))\n\t\telse:\n\t\t\tform.append(H4("Th\xc3\xb4ng tin \xc4\x91\xe1\xba\xa1i l\xc3\xbd gi\xe1\xbb\x9bi thi\xe1\xbb\x87u kh\xc3\xb4ng ph\xc3\xb9 h\xe1\xbb\xa3p. Vui l\xc3\xb2ng ki\xe1\xbb\x83m tra l\xe1\xba\xa1i ", A("T\xe1\xba\xa0I \xc4\x90\xc3\x82Y", _href="/hop-tac"), _class="text-center margin_bottom30"))\n\n\telse:\n\t\tform.append(DIV(\'Thi\xe1\xba\xbfu d\xe1\xbb\xaf li\xe1\xbb\x87u\', _class="text-center"))\n\treturn form\n\n\ndef form_salesman():\n\tform = DIV(H4("Th\xc3\xb4ng tin \xc4\x91\xe1\xba\xa1i l\xc3\xbd gi\xe1\xbb\x9bi thi\xe1\xbb\x87u", _class="text-center margin_bottom15"), _id=\'dang_ky_salesman\')\n\tform.append(DIV("N\xe1\xba\xbfu b\xe1\xba\xa1n ch\xc6\xb0a c\xc3\xb3 \xc4\x91\xe1\xba\xa1i l\xc3\xbd gi\xe1\xbb\x9bi thi\xe1\xbb\x87u, vui l\xc3\xb2ng nh\xe1\xba\xadp m\xc3\xa3 ", B(\'NASO2021\'), \' \xc4\x91\xe1\xbb\x83 \xc4\x91\xc6\xb0\xe1\xbb\xa3c gi\xe1\xbb\x9bi thi\xe1\xbb\x87u \xc4\x91\xe1\xba\xa1i l\xc3\xbd\', BR(), _class=\'margin_bottom30 text-center\'))\n\n\tdiv1 = DIV(INPUT(_type=\'text\', _class="form-control", _name=\'doi_nhom\', _placeholder="M\xc3\xa3 \xc4\x91\xe1\xba\xa1i l\xc3\xbd"))\n\n\tdiv2 = DIV(\'ho\xe1\xba\xb7c\', _class="text-center")\n\n\tdiv3 = DIV(INPUT(_type=\'text\', _class="form-control", _name=\'phone\', _placeholder="S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i \xc4\x91\xe1\xba\xa1i l\xc3\xbd"), _class=\'form-group\')\n\n\tajax = "ajax(\'%s\', [\'phone\',\'doi_nhom\' ], \'dang_ky_salesman\')" % (URL(c=\'plugin_app\', f=\'thong_tin_daily\'))\n\tdiv4 = DIV(A(I(_class=\'fa fa-caret-right\'), \' Ki\xe1\xbb\x83m tra th\xc3\xb4ng tin \xc4\x91\xe1\xba\xa1i l\xc3\xbd \', _onclick=ajax, _class=\'btn btn-success  btn_naso\'), _class=\'text-center\')\n\n\tform.append(DIV(div1, div2, div3, div4, _class=\'col-lg-4 col-md-offset-4\'))\n\n\treturn form\n\n\ndef input_focus(key):\n\tscr = \'\'\'\n\t<script>\n\t\tdocument.getElementById("%s").focus();\n\t</script>\n\t\'\'\' % key\n\treturn XML(scr)\n\n\ndef test():\n\tsalesman = cms.define_table(\'salesman\')\n\trow = db(salesman.id == 7).update(birthday=\'2021-05-08\')\n\treturn row\n\n\ndef dang_ky_salesman():\n\timport datetime\n\tformat = "%d/%m/%Y"\n\n\tsalesman = cms.define_table(\'salesman\')\n\tdiv = DIV()\n\n\t## Ki\xe1\xbb\x83m tra M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u h\xe1\xbb\xa3p l\xe1\xbb\x87\n\tdoi_nhom = request.vars[\'doi_nhom\']\n\tc_manager = None\n\tma_code = ""\n\ts_manager = db(salesman.name_code == doi_nhom).select().first()\n\tif s_manager:\n\t\tc_manager = s_manager.id\n\t\tma_code = doi_nhom\n\t# Ki\xe1\xbb\x83m tra c\xc3\xb3 d\xe1\xbb\xaf li\xe1\xbb\x87u\n\tkey_check = [\'auth_name\', \'name\', \'phone\', \'email\']\n\tfor key in key_check:\n\t\tif not request.vars[key]:\n\t\t\tdiv = DIV(\'C\xe1\xba\xa7n nh\xe1\xba\xadp %s\' % (T(\'salesman_\' + key)), _class=\'text-center\')\n\t\t\tdiv.append(input_focus(key))\n\t\t\treturn div\n\n\t# Ki\xe1\xbb\x83m tra \xc4\x91\xe1\xbb\x8bnh d\xe1\xba\xa1ng ng\xc3\xa0y th\xc3\xa1ng\n\t# key_date =[\'birthday\',\'id_day\']\n\t# for key in key_date:\n\t# date_string = request.vars[key]\n\t# try:\n\t# datetime.datetime.strptime(date_string, format)\n\t# except Exception,e:\n\t# div =  DIV(\'Nh\xe1\xba\xadp sai \xc4\x91\xe1\xbb\x8bnh d\xe1\xba\xa1ng ng\xc3\xa0y %s\'%(T(\'salesman_\'+key)),_class=\'text-center\')\n\t# div.append(input_focus(key))\n\t# return div\n\n\t## Ki\xe1\xbb\x83m tra duy nh\xe1\xba\xa5t c\xe1\xbb\xa7a user_name\n\tauth_name = request.vars.auth_name\n\tif len(auth_name) < 6:\n\t\tdiv = DIV("T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp c\xe1\xba\xa7n d\xc3\xa0i h\xc6\xa1n 6 k\xc3\xbd t\xe1\xbb\xb1", _class=\'text-center\')\n\t\tdiv.append(input_focus("auth_name"))\n\t\treturn div\n\tuser_check = db(db.auth_user.username == auth_name).count()\n\tif user_check > 0:\n\t\tdiv = DIV("T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp \xc4\x91\xc3\xa3 t\xe1\xbb\x93n t\xe1\xba\xa1i. Vui l\xc3\xb2ng ki\xe1\xbb\x83m tra l\xe1\xba\xa1i", _class=\'text-center\')\n\t\tdiv.append(input_focus("auth_name"))\n\t\treturn div\n\n\t## Ki\xe1\xbb\x83m tra m\xe1\xba\xadt kh\xe1\xba\xa9u\n\tpassword = request.vars.password\n\tpassword2 = request.vars.password2\n\tif len(password) < 8:\n\t\tdiv = DIV("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n tr\xc3\xaan 8 k\xc3\xbd t\xe1\xbb\xb1", _class=\'text-center\')\n\t\tdiv.append(input_focus("password"))\n\t\treturn div\n\tif password.isalpha():\n\t\tdiv = DIV("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n ch\xe1\xbb\xa9a c\xe1\xba\xa3 s\xe1\xbb\x91", _class=\'text-center\')\n\t\tdiv.append(input_focus("password"))\n\t\treturn div\n\n\tif password.isdigit():\n\t\tdiv = DIV("M\xe1\xba\xadt kh\xe1\xba\xa9u c\xe1\xba\xa7n ch\xe1\xbb\xa9a c\xe1\xba\xa3 ch\xe1\xbb\xaf", _class=\'text-center\')\n\t\tdiv.append(input_focus("password"))\n\t\treturn div\n\n\tif password != password2:\n\t\tdiv = DIV("2 m\xe1\xba\xadt kh\xe1\xba\xa9u kh\xc3\xb4ng gi\xe1\xbb\x91ng nhau", _class=\'text-center\')\n\t\tdiv.append(input_focus("password2"))\n\t\treturn div\n\n\t## Ki\xe1\xbb\x83m tra duy nh\xe1\xba\xa5t c\xe1\xbb\xa7a \xc4\x90i\xe1\xbb\x87n tho\xe1\xba\xa1i\n\tphone = str(request.vars.phone)\n\tif len(phone) != 10:\n\t\tdiv = DIV("S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87", _class=\'text-center\')\n\t\tdiv.append(input_focus("phone"))\n\t\treturn div\n\tuser_check = db(salesman.phone == phone).count()\n\tif user_check > 0:\n\t\tdiv = DIV("S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i \xc4\x91\xc3\xa3 t\xe1\xbb\x93n t\xe1\xba\xa1i. Vui l\xc3\xb2ng ki\xe1\xbb\x83m tra l\xe1\xba\xa1i", _class=\'text-center\')\n\t\tdiv.append(input_focus("phone"))\n\t\treturn div\n\n\t## Ki\xe1\xbb\x83m tra \xc4\x91\xe1\xbb\x93ng \xc3\xbd \xc4\x91i\xe1\xbb\x81u kho\xe1\xba\xa3n\n\tif request.vars.dieu_khoan != \'da_check\':\n\t\treturn DIV("B\xe1\xba\xa1n c\xe1\xba\xa7n \xc4\x91\xe1\xbb\x8dc v\xc3\xa0 ch\xe1\xba\xa5p nh\xe1\xba\xadn \xc4\x90i\xe1\xbb\x81u kho\xe1\xba\xa3n \xc4\x91\xe1\xba\xa1i l\xc3\xbd v\xc3\xa0 Ch\xc3\xadnh s\xc3\xa1ch b\xe1\xba\xa3o m\xe1\xba\xadt c\xe1\xbb\xa7a Naso", _class=\'text-center\')\n\ttry:\n\t\t# birthday = datetime.datetime.strptime(request.vars.birthday, \'%d/%m/%Y\').strftime("%Y-%m-%d")\n\t\t# id_day = datetime.datetime.strptime(request.vars.id_day, \'%d/%m/%Y\').strftime("%Y-%m-%d")\n\t\tid = cms.db.salesman.insert(folder=256,\n\t\t\ts_manager=c_manager,\n\t\t\tname=request.vars.name,\n\t\t\td_tinh=request.vars.d_tinh,\n\t\t\tphone=request.vars.phone,\n\t\t\temail=request.vars.email,\n\t\t\tcreated_on=datetime.datetime.now())\n\t\tif id:\n\t\t\tfrom plugin_process import ProcessModel\n\t\t\tprocess = ProcessModel()\n\t\t\tobjects = process.define_objects(True)\n\t\t\tobjects_id = objects.insert(folder=256, foldername=\'dai-ly\', tablename=\'salesman\', table_id=id, auth_group=18, process=76)\n\n\t\t\tfirst_name = request.vars.name.split(" ")[0]\n\t\t\tlast_name = request.vars.name.replace(first_name, \'\')\n\n\t\t\tdb.auth_user.insert(auth_group=18, role=\'Nh\xc3\xa2n vi\xc3\xaan\', username=request.vars.auth_name, email=request.vars.email, password=db.auth_user.password.requires[0](password)[0], first_name=first_name, last_name=last_name)\n\n\t\t\t# X\xe1\xbb\xad l\xc3\xbd g\xe1\xbb\xadi email ho\xe1\xba\xb7c sms t\xe1\xba\xa1i \xc4\x91\xc3\xa2y\n\n\t\t\tsend_to = request.vars.email\n\t\t\tyou_name = request.vars.name\n\t\t\tyou_phone = request.vars.phone\n\t\t\tyou_email = request.vars.email\n\t\t\tdes = request.vars.description\n\t\t\tsubject = "[Bahadi.vn] Th\xc3\xb4ng tin \xc4\x91\xc4\x83ng l\xc3\xbd \xc4\x91\xe1\xba\xa1i l\xc3\xbd m\xe1\xbb\x9bi."\n\t\t\t# N\xe1\xbb\x99i dung g\xe1\xbb\xadi email\n\t\t\tdiv_email = DIV()\n\t\t\tdiv_email.append(H3("B\xe1\xba\xa1n \xc4\x91\xc3\xa3 \xc4\x91\xc4\x83ng k\xc3\xbd \xc4\x91\xe1\xba\xa1i l\xc3\xbd t\xe1\xba\xa1i Bahadi.vn v\xe1\xbb\x9bi c\xc3\xa1c th\xc3\xb4ng tin:"))\n\t\t\ttable = TABLE(TR(TD(\'H\xe1\xbb\x8d v\xc3\xa0 t\xc3\xaan\'), TD(you_name), TD("M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u"), TD(ma_code if ma_code else \'\')), _style=\'width:700px; background:#eee; padding:10px;\')\n\t\t\ttable.append(TR(TD(\'T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp\'), TD(request.vars.auth_name), TD(\'M\xe1\xba\xadt kh\xe1\xba\xa9u\'), TD(B(password))))\n\t\t\t# table.append(TR(TD(\'Sinh ng\xc3\xa0y\'),TD(request.vars.birthday),TD(\'Gi\xe1\xbb\x9bi t\xc3\xadnh\'),TD(request.vars.sex)))\n\t\t\ttable.append(TR(TD(\'S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i\'), TD(request.vars.phone), TD(\'Email\'), TD(request.vars.email)))\n\t\t\t# table.append(TR(TD(\'Tp/T\xe1\xbb\x89nh\'),TD(request.vars.d_tinh),TD(\'C\xc4\x83n C\xc6\xb0\xe1\xbb\x9bc/Passport\'),TD(request.vars.id_card)))\n\t\t\ttable.append(TR(TD(\'Tp/T\xe1\xbb\x89nh\'), TD(request.vars.d_tinh), TD(\'\'), TD(\'\')))\n\t\t\t# table.append(TR(TD(\'Ng\xc3\xa0y c\xe1\xba\xa5p\'),TD(request.vars.id_day),TD(\'N\xc6\xa1i c\xe1\xba\xa5p\'),TD(request.vars.id_by)))\n\t\t\tdiv_email.append(table)\n\t\t\t# div_email.append(H4("(*) Sau khi \xc4\x91\xc4\x83ng nh\xe1\xba\xadp b\xe1\xba\xa1n vui l\xc3\xb2ng \xc4\x91\xe1\xbb\x95i m\xe1\xba\xadt kh\xe1\xba\xa9u \xc4\x91\xe1\xbb\x83 \xc4\x91\xe1\xba\xa3m b\xe1\xba\xa3o an to\xc3\xa0n cho t\xc3\xa0i kho\xe1\xba\xa3n."))\n\t\t\tdiv_email.append(P("M\xe1\xbb\x8di v\xe1\xba\xa5n \xc4\x91\xe1\xbb\x81 sai s\xc3\xb3t, v\xc6\xb0\xe1\xbb\x9bng m\xe1\xba\xafc v\xe1\xbb\x81 t\xc3\xa0i kho\xe1\xba\xa3n vui l\xc3\xb2ng li\xc3\xaan h\xe1\xbb\x87 0866 303 366 \xc4\x91\xe1\xbb\x83 \xc4\x91\xc6\xb0\xe1\xbb\xa3c h\xe1\xbb\x97 tr\xe1\xbb\xa3."))\n\n\t\t\tmail = auth.setting_mail()\n\t\t\tif mail.send(to=send_to, subject=subject, message=\'<html>%s</html>\' % str(div_email)):\n\t\t\t\t# c\xe1\xba\xadp nh\xe1\xba\xadt \xc4\x91\xc3\xa3 g\xe1\xbb\xadi tk qua email\n\t\t\t\tdiv.append(H4(\'\xc4\x90\xc4\x83ng k\xc3\xbd th\xc3\xa0nh c\xc3\xb4ng.\', _class=\'text-center\'))\n\t\t\telse:\n\t\t\t\t# c\xe1\xba\xadp nh\xe1\xba\xadt \xc4\x91\xc3\xa3 g\xe1\xbb\xadi tk qua email, c\xe1\xba\xa7n l\xc6\xb0u log \xc4\x91\xe1\xbb\x83 x\xe1\xbb\xad l\xc3\xbd c\xc3\xa1c email kh\xc3\xb4ng g\xe1\xbb\xadi \xc4\x91\xc6\xb0\xe1\xbb\xa3c.\n\t\t\t\tdiv.append(H4(\'\xc4\x90\xc4\x83ng k\xc3\xbd th\xc3\xa0nh c\xc3\xb4ng.\', _class=\'text-center\'))\n\t\t\tscr = \'\'\'\n\t\t\t <META http-equiv="refresh" content="3;URL=%s">\n\t\t\t\'\'\' % (URL(c=\'plugin_auth\', f=\'login\'))\n\t\t\tdiv.append(XML(scr))\n\t\t\treturn div\n\t\telse:\n\t\t\tdiv.append(H4(\'\xc4\x90\xc4\x83ng k\xc3\xbd l\xe1\xbb\x97i\', _class=\'text-center\'))\n\t\t\tscr = \'\'\'\n\t\t\t <META http-equiv="refresh" content="3;URL=%s">\n\t\t\t\'\'\' % (URL(c=\'hop-tac\'))\n\t\t\tdiv.append(XML(scr))\n\t\t\treturn div\n\texcept Exception, e:\n\t\treturn e\n\n\ndef testmail():\n\tdiv = DIV()\n\tdiv.append(H3("B\xe1\xba\xa1n \xc4\x91\xc3\xa3 \xc4\x91\xc4\x83ng k\xc3\xbd \xc4\x91\xe1\xba\xa1i l\xc3\xbd t\xe1\xba\xa1i Bahadi.vn v\xe1\xbb\x9bi c\xc3\xa1c th\xc3\xb4ng tin:"))\n\ttable = TABLE(TR(TD(\'H\xe1\xbb\x8d v\xc3\xa0 t\xc3\xaan\'), TD("Nguy\xe1\xbb\x85n Tu\xe1\xba\xa5n Anh"), TD("M\xc3\xa3 gi\xe1\xbb\x9bi thi\xe1\xbb\x87u"), TD(\'\')), _style=\'width:700px; background:#eee; padding:10px;\')\n\ttable.append(TR(TD(\'T\xc3\xaan \xc4\x91\xc4\x83ng nh\xe1\xba\xadp\'), TD("......"), TD(\'M\xe1\xba\xadt kh\xe1\xba\xa9u\'), TD(B("..."))))\n\ttable.append(TR(TD(\'Sinh ng\xc3\xa0y\'), TD("../../.."), TD(\'Gi\xe1\xbb\x9bi t\xc3\xadnh\'), TD("...")))\n\ttable.append(TR(TD(\'S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i\'), TD("......"), TD(\'Email\'), TD("...")))\n\ttable.append(TR(TD(\'Tp/T\xe1\xbb\x89nh\'), TD("......"), TD(\'C\xc4\x83n C\xc6\xb0\xe1\xbb\x9bc/Passport\'), TD("...")))\n\ttable.append(TR(TD(\'Ng\xc3\xa0y c\xe1\xba\xa5p\'), TD("......"), TD(\'N\xc6\xa1i c\xe1\xba\xa5p\'), TD("...")))\n\tdiv.append(table)\n\tdiv.append(H4("(*) Sau khi \xc4\x91\xc4\x83ng nh\xe1\xba\xadp b\xe1\xba\xa1n vui l\xc3\xb2ng \xc4\x91\xe1\xbb\x95i m\xe1\xba\xadt kh\xe1\xba\xa9u \xc4\x91\xe1\xbb\x83 \xc4\x91\xe1\xba\xa3m b\xe1\xba\xa3o an to\xc3\xa0n cho t\xc3\xa0i kho\xe1\xba\xa3n."))\n\tdiv.append(P("M\xe1\xbb\x8di v\xe1\xba\xa5n \xc4\x91\xe1\xbb\x81 sai s\xc3\xb3t, v\xc6\xb0\xe1\xbb\x9bng m\xe1\xba\xafc v\xe1\xbb\x81 t\xc3\xa0i kho\xe1\xba\xa3n vui l\xc3\xb2ng li\xc3\xaan h\xe1\xbb\x87 0866 303 366 \xc4\x91\xe1\xbb\x83 \xc4\x91\xc6\xb0\xe1\xbb\xa3c h\xe1\xbb\x97 tr\xe1\xbb\xa3."))\n\treturn div\n\n\n#############################################\n### Page Li\xc3\xaan h\xe1\xbb\x87\n##############################################\n\ndef form_lienhe():\n\tform = FORM(_id=\'form_lienhe\')\n\t# form.append(H4(\'Th\xc3\xb4ng tin ng\xc6\xb0\xe1\xbb\x9di \xc4\x91\xe1\xba\xb7t h\xc3\xa0ng\' ,_class=\'title_form\'))\n\n\tdiv2 = DIV(_class="form-group col-md-12")\n\tdiv2.append(INPUT(_type=\'text\', _class="form-control", _name=\'subject\', _placeholder="Ti\xc3\xaau \xc4\x91\xe1\xbb\x81"))\n\tform.append(DIV(div2, _class=\'row\'))\n\n\tdiv2 = DIV(_class="form-group col-md-12")\n\tdiv2.append(INPUT(_type=\'text\', _class="form-control", _name=\'name\', _placeholder="Ng\xc6\xb0\xe1\xbb\x9di li\xc3\xaan h\xe1\xbb\x87"))\n\tform.append(DIV(div2, _class=\'row\'))\n\n\tdiv1 = DIV(_class="form-group col-md-6")\n\n\tdiv1.append(INPUT(_type=\'text\', _class="form-control", _name=\'phone\', _placeholder="S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i"))\n\n\tdiv2 = DIV(_class="form-group col-md-6")\n\tdiv2.append(INPUT(_type=\'text\', _class="form-control", _name=\'email\', _placeholder="Email"))\n\tform.append(DIV(div1, div2, _class=\'row\'))\n\n\tdiv1 = DIV(_class="form-group")\n\t# div1.append(LABEL(\'L\xe1\xbb\x9di nh\xe1\xba\xafn\'))\n\tdiv1.append(TEXTAREA(_class="form-control", _rows="3", _name=\'description\', _placeholder="L\xe1\xbb\x9di nh\xe1\xba\xafn", _style="width: 100%; "))\n\tform.append(div1)\n\n\tajax = "ajax(\'%s\', [\'name\',\'email\',\'subject\',\'phone\',\'description\'], \'form_lienhe\')" % (URL(f=\'sendemail_lienhe\'))\n\tform.append(DIV(A(I(_class=\'fa fa-mail-forward\'), \' G\xe1\xbb\xadi li\xc3\xaan h\xe1\xbb\x87 \', _onclick=ajax, _class=\'btn btn-success btn_naso\'), _class=\'text-center\'))\n\treturn form\n\n\ndef sendemail_lienhe():\n\tsend_to = "nasojsc@gmail.com"\n\tyou_name = request.vars.name\n\tyou_phone = request.vars.phone\n\tyou_email = request.vars.email\n\tyou_subject = request.vars.subject\n\tdes = request.vars.description\n\n\tsubject = "Li\xc3\xaan h\xe1\xbb\x87 web: %s" % you_subject\n\tcontent = "Kh\xc3\xa1ch h\xc3\xa0ng "\n\tdiv = DIV(_style="   background: #eee;    padding: 10px 20px;")\n\tdiv.append(H2(you_subject))\n\tdiv.append(P(\'Ng\xc6\xb0\xe1\xbb\x9di li\xc3\xaan h\xe1\xbb\x87: %s\' % (you_name)))\n\tdiv.append(P(\'S\xe1\xbb\x91 \xc4\x91i\xe1\xbb\x87n tho\xe1\xba\xa1i: %s\' % (you_phone)))\n\tdiv.append(P(\'Email: %s\' % (you_email)))\n\tdiv.append(P(\'N\xe1\xbb\x99i dung: %s\' % (des)))\n\tmail = auth.setting_mail()\n\t# scr =\'\'\'<script type="text/javascript">\n\t# setInterval("window.parent.close()",3000);\n\t# </script>\'\'\'\n\tif mail.send(to=send_to, subject=subject, message=\'<html>%s</html>\' % str(div)):\n\t\tdiv = DIV(H4(\'Ch\xc3\xbang t\xc3\xb4i \xc4\x91\xc3\xa3 nh\xe1\xba\xadn \xc4\x91\xc6\xb0\xe1\xbb\xa3c li\xc3\xaan h\xe1\xbb\x87 c\xe1\xbb\xa7a b\xe1\xba\xa1n v\xe1\xbb\x9bi n\xe1\xbb\x99i dung nh\xc6\xb0 sau.\'), div, H4(\'Ch\xc3\xbang t\xc3\xb4i s\xe1\xba\xbd li\xc3\xaan h\xe1\xbb\x87 v\xe1\xbb\x9bi b\xe1\xba\xa1n s\xe1\xbb\x9bm nh\xe1\xba\xa5t c\xc3\xb3 th\xe1\xbb\x83. Xin c\xe1\xba\xa3m \xc6\xa1n.\'))\n\t# div.append(XML(scr))\n\n\telse:\n\t\tdiv = DIV(H3(T(\'G\xe1\xbb\xadi y\xc3\xaau c\xe1\xba\xa7u kh\xc3\xb4ng th\xe1\xbb\x83 th\xe1\xbb\xb1c hi\xe1\xbb\x87n. \')), XML(scr), _class=\'notice\')\n\tdiv.append(DIV(A(I(_class=\'fa fa-home\'), \' V\xe1\xbb\x81 trang ch\xe1\xbb\xa7 \', _href="#", _class=\'btn btn-success btn_naso\'), _class=\'text-center\'))\n\treturn div\n\n\n# th\xc3\xb4ng tin \xc4\x91\xe1\xba\xb7t h\xc3\xa0ng\ndef product_shape():\n\timport requests\n\tfrom plugin_app import number_format\n\t# url_produc = \'%s/api/v1/product/%s.json\'%(api_naso,request.args(0))\n\turl_produc = \'%s/api/product_by_id.json?id=%s\' % (api_naso, request.args(0))\n\tr1 = requests.get(url_produc).json()\n\trow_s = r1[\'result\']\n\tif not row_s: return \'S\xe1\xba\xa3n ph\xe1\xba\xa9m kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87\'\n\tvars = request.vars\n\tdiv = DIV(_class=\'product_shape\')\n\t# S\xe1\xba\xa3n ph\xe1\xba\xa9m kh\xc3\xb4ng thu\xe1\xbb\x99c t\xc3\xadnh\n\tif row_s[\'isGroup\']:\n\t\tdiv_warehouse, xnumber, house_name = list_warehouse(row_s[\'warehouse\'])\n\t\tdiv.append(div_warehouse)\n\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\tdiv.append(p_prod)\n\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max=xnumber, _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\tdiv_btn.append(BUTTON(SPAN(_class=\'card_now\'), \'Mua ngay\', _class="SP_HOT_List_BOX_text_button btn", _type=\'submit\', _style="margin-top: -7px;margin-left: 10px;"))\n\n\t\t# Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\n\t\tdiv_btn.append(DIV(SPAN(_class=\'card_now\'), \'Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\', _class="btn_add_cart btn", _style="margin-top: -7px;margin-left: 10px;", _id=\'addProductToCart\'))\n\t\tajaxAddCart = "ajax(\'%s\', [\'kho_hang\', \'quantity\'], \'_blank\')" % (URL(c=\'plugin_app\', f=\'add_product_to_cart\', vars=dict(pid=row_s[\'id\'])))\n\t\tdiv_btn.append(DIV(_style=\'display:none\', _onclick=ajaxAddCart, _id=\'addProductToCartHid\'))\n\t\tscript = """$(\'#addProductToCart\').click(function(){\n\t\t\t\t\t\tshowModal();\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$("#addProductToCartHid").trigger(\'click\');\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t});"""\n\t\tdiv_btn.append(XML(SCRIPT(script)))\n\n\t\tdiv.append(div_btn)\n\t\tdiv = DIV(FORM(div, _action=URL(a=\'cms\', c=\'portal\', f=\'add_cart_r_number\', vars=dict(pid=row_s[\'id\']))))\n\n\t# S\xe1\xba\xa3n ph\xe1\xba\xa9m c\xc3\xb3 thu\xe1\xbb\x99c t\xc3\xadnh\n\telse:\n\t\tajax_shape = "ajax(\'%s\', [], \'wr_product_shape\')" % (URL(a=\'cms\', c=\'portal\', f=\'product_shape\', args=request.args, vars=dict(pid=row_s[\'id\'])))\n\n\t\turl_p = \'%s/api/product_shape.json?id=%s\' % (api_naso, request.args(0))\n\t\trp = requests.get(url_p).json()\n\t\trps = row_s[\'list_product\']\n\t\t# Danh s\xc3\xa1ch thu\xe1\xbb\x99c t\xc3\xadnh\n\t\tlist_shape = rp[\'list_shape\']\n\t\tlist_shape_value = rp[\'list_shape_value\']\n\t\ttrans = rp[\'trans\']\n\n\t\ttry:\n\t\t\ti = 0\n\t\t\ttype_name = []\n\t\t\tfor tt in list_shape:\n\t\t\t\ttype_name.append(str(tt))\n\t\t\tfor tt in list_shape:\n\t\t\t\tul = UL(LI(trans.get(tt), _class=\'is_first\'), _class=\'list_thuoc_tinh col-md-12 row\')\n\t\t\t\tfor va in list_shape_value[tt]:\n\t\t\t\t\tajax = "ajax(\'%s\', %s, \'wr_product_shape\')" % (URL(c=\'plugin_app\', f=\'product_shape\', args=request.args), type_name)\n\t\t\t\t\tif str(va) == vars[tt]:\n\t\t\t\t\t\tul.append(LI(INPUT(_value=va, _type=\'radio\', _name=tt, _onchange=ajax, _checked=True), trans.get(va)))\n\t\t\t\t\telse:\n\t\t\t\t\t\tul.append(LI(INPUT(_value=va, _type=\'radio\', _name=tt, _onchange=ajax), trans.get(va)))\n\t\t\t\tdiv.append(ul)\n\n\t\t\ti = 0\n\t\texcept Exception, e:\n\t\t\treturn e\n\t\tprice = check_product(rps, list_shape)\n\n\t\tif price:\n\t\t\tdiv_warehouse, xnumber, house_name = list_warehouse(price[\'warehouse\'])\n\t\t\tdiv.append(div_warehouse)\n\t\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\n\t\t\tif price[\'price\'] != "":\n\t\t\t\tp_prod.append(SPAN(str(number_format(price[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\telse:\n\t\t\t\tp_prod.append(SPAN(\'Li\xc3\xaan h\xe1\xbb\x87\'))\n\t\t\tdiv.append(p_prod)\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\n\t\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max=100, _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\t\tdiv.append(div_btn)\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\t\tdiv_btn.append(BUTTON(SPAN(_class=\'card_now\'), \'Mua ngay\', _class="SP_HOT_List_BOX_text_button btn", _type=\'submit\', _style="margin-top: -7px;margin-left: 10px;"))\n\n\t\t\t# Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\n\t\t\tdiv_btn.append(DIV(SPAN(_class=\'card_now\'), \'Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\', _class="btn_add_cart btn", _style="margin-top: -7px;margin-left: 10px;", _id=\'addProductToCart\'))\n\t\t\tajaxAddCart = "ajax(\'%s\', [\'kho_hang\', \'quantity\'], \'_blank\')" % (URL(c=\'plugin_app\', f=\'add_product_to_cart\', vars=dict(pid=price[\'product_sub\'])))\n\t\t\tdiv_btn.append(DIV(_style=\'display:none\', _onclick=ajaxAddCart, _id=\'addProductToCartHid\'))\n\t\t\tscript = """$(\'#addProductToCart\').click(function(){\n\t\t\t\t\t\t\tshowModal();\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t$("#addProductToCartHid").trigger(\'click\');\n\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t});"""\n\t\t\tdiv_btn.append(XML(SCRIPT(script)))\n\n\t\t\tdiv.append(div_btn)\n\n\t\t\tdiv = DIV(FORM(div, _action=URL(a=\'cms\', c=\'portal\', f=\'add_cart_r_number\', vars=dict(pid=price[\'product_sub\']))))\n\n\t\telse:\n\t\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\n\t\t\tif row_s[\'price\'] != "":\n\t\t\t\tif row_s[\'product_unit\'] != "":\n\t\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\t\telse:\n\t\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\telse:\n\t\t\t\tp_prod.append(SPAN(\'Li\xc3\xaan h\xe1\xbb\x87\'))\n\t\t\tif row_s[\'old_price\'] != "":\n\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'old_price\'])) + \' \xc4\x91\', _class=\'old_price\'))\n\t\t\tdiv.append(p_prod)\n\n\t\t\tdiv.append(DIV(_id=\'alert_thuoc_tinh\', _class=\'row alert_thuoc_tinh\'))\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\n\t\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max="", _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\t\tdiv.append(div_btn)\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\t\tdiv_btn.append(I(\'(*) Vui l\xc3\xb2ng ch\xe1\xbb\x8dn thu\xe1\xbb\x99c t\xc3\xadnh\', _style=\'color: #f00;font-size: 12px;\'))\n\n\t\t\t# div_btn.append(SPAN(A(SPAN(_class=\'card_now\'), \'Mua h\xc3\xa0ng\', _class="SP_HOT_List_BOX_text_button", _onclick="fillData()"), _class="btn_add"))\n\t\t\tdiv.append(div_btn)\n\n\tscr = \'\'\'\n\t<script>\n\tfunction wcqib_refresh_quantity_increments() {\n\t\tjQuery("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").each(function(a, b) {\n\t\t\tvar c = jQuery(b);\n\t\t\tc.addClass("buttons_added"), c.children().first().before(\'<input type="button" value="-" class="minus" />\'), c.children().last().after(\'<input type="button" value="+" class="plus" />\')\n\t\t})\n\t}\n\n\tString.prototype.getDecimals || (String.prototype.getDecimals = function() {\n\t\tvar a = this,\n\t\t\tb = ("" + a).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n\t\treturn b ? Math.max(0, (b[1] ? b[1].length : 0) - (b[2] ? +b[2] : 0)) : 0\n\t}), jQuery(document).ready(function() {\n\t\twcqib_refresh_quantity_increments()\n\t}), jQuery(document).on("updated_wc_div", function() {\n\t\twcqib_refresh_quantity_increments()\n\t}), jQuery(document).on("click", ".plus, .minus", function() {\n\t\tvar a = jQuery(this).closest(".quantity").find(".qty"),\n\t\t\tb = parseFloat(a.val()),\n\t\t\tc = parseFloat(a.attr("max")),\n\t\t\td = parseFloat(a.attr("min")),\n\t\t\te = a.attr("step");\n\t\tb && "" !== b && "NaN" !== b || (b = 0), "" !== c && "NaN" !== c || (c = ""), "" !== d && "NaN" !== d || (d = 0), "any" !== e && "" !== e && void 0 !== e && "NaN" !== parseFloat(e) || (e = 1), jQuery(this).is(".plus") ? c && b >= c ? a.val(c) : a.val((b + parseFloat(e)).toFixed(e.getDecimals())) : d && b <= d ? a.val(d) : b > 0 && a.val((b - parseFloat(e)).toFixed(e.getDecimals())), a.trigger("change")\n\t});\n\n\t  let fillData = () => {\n        let ele = document.getElementById(\'alert_thuoc_tinh\');\n        ele.innerHTML = \'<div class="bottom_10 col-lg-12"> C\xe1\xba\xa7n ch\xe1\xbb\x8dn thu\xe1\xbb\x99c t\xc3\xadnh tr\xc6\xb0\xe1\xbb\x9bc khi \xc4\x91\xe1\xba\xb7t h\xc3\xa0ng </div>\';\n    }\n\t</script>\n\t\'\'\'\n\tdiv.append(XML(scr))\n\treturn div\n\n\n# Th\xc3\xb4ng tin \xc4\x91\xe1\xba\xb7t h\xc3\xa0ng tr\xc3\xaan website \xc4\x91\xe1\xba\xa1i l\xc3\xbd\ndef order_information_salesman():\n\timport requests\n\tfrom plugin_app import number_format\n\t# url_produc = \'%s/api/v1/product/%s.json\'%(api_naso,request.args(0))\n\turl_produc = \'%s/api/product_by_id.json?id=%s\' % (api_naso, request.args(0))\n\tr1 = requests.get(url_produc).json()\n\trow_s = r1[\'result\']\n\tif not row_s: return \'S\xe1\xba\xa3n ph\xe1\xba\xa9m kh\xc3\xb4ng h\xe1\xbb\xa3p l\xe1\xbb\x87\'\n\tvars = request.vars\n\tdiv = DIV(_class=\'product_shape\')\n\t# S\xe1\xba\xa3n ph\xe1\xba\xa9m kh\xc3\xb4ng thu\xe1\xbb\x99c t\xc3\xadnh\n\tif row_s[\'isGroup\']:\n\t\tdiv_warehouse, xnumber, house_name = list_warehouse(row_s[\'warehouse\'])\n\t\tdiv.append(div_warehouse)\n\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\tdiv.append(p_prod)\n\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max=xnumber, _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\tdiv_btn.append(BUTTON(SPAN(_class=\'card_now\'), \'Mua ngay\', _class="SP_HOT_List_BOX_text_button btn", _type=\'submit\', _style="margin-top: -7px;margin-left: 10px;"))\n\n\t\t# Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\n\t\tdiv_btn.append(DIV(SPAN(_class=\'card_now\'), \'Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\', _class="btn_add_cart btn", _style="margin-top: -7px;margin-left: 10px;", _id=\'addProductToCart\'))\n\t\tajaxAddCart = "ajax(\'%s\', [\'kho_hang\', \'quantity\'], \'testCart\')" % (URL(c=\'plugin_app\', f=\'add_product_to_cart\', vars=dict(pid=row_s[\'id\'])))\n\t\tdiv_btn.append(DIV(_style=\'display:none\', _onclick=ajaxAddCart, _id=\'addProductToCartHid\'))\n\t\tscript = """$(\'#addProductToCart\').click(function(){\n\t\t\t\t\t\tshowModal();\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$("#addProductToCartHid").trigger(\'click\');\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t});"""\n\t\tdiv_btn.append(XML(SCRIPT(script)))\n\n\t\tdiv.append(div_btn)\n\t\tdiv = DIV(FORM(div, _action=URL(a=\'cms\', c=\'portal\', f=\'add_cart_r_number\', vars=dict(pid=row_s[\'id\']))))\n\n\t# S\xe1\xba\xa3n ph\xe1\xba\xa9m c\xc3\xb3 thu\xe1\xbb\x99c t\xc3\xadnh\n\telse:\n\t\tajax_shape = "ajax(\'%s\', [], \'wr_product_shape\')" % (URL(a=\'cms\', c=\'portal\', f=\'product_shape\', args=request.args, vars=dict(pid=row_s[\'id\'])))\n\n\t\turl_p = \'%s/api/product_shape.json?id=%s\' % (api_naso, request.args(0))\n\t\trp = requests.get(url_p).json()\n\t\trps = row_s[\'list_product\']\n\t\t# Danh s\xc3\xa1ch thu\xe1\xbb\x99c t\xc3\xadnh\n\t\tlist_shape = rp[\'list_shape\']\n\t\tlist_shape_value = rp[\'list_shape_value\']\n\t\ttrans = rp[\'trans\']\n\n\t\ttry:\n\t\t\ti = 0\n\t\t\ttype_name = []\n\t\t\tfor tt in list_shape:\n\t\t\t\ttype_name.append(str(tt))\n\t\t\tfor tt in list_shape:\n\t\t\t\tul = UL(LI(trans.get(tt), _class=\'is_first\'), _class=\'list_thuoc_tinh col-md-12 row\')\n\t\t\t\tfor va in list_shape_value[tt]:\n\t\t\t\t\tajax = "ajax(\'%s\', %s, \'wr_product_shape\')" % (URL(c=\'plugin_app\', f=\'product_shape\', args=request.args), type_name)\n\t\t\t\t\tif str(va) == vars[tt]:\n\t\t\t\t\t\tul.append(LI(INPUT(_value=va, _type=\'radio\', _name=tt, _onchange=ajax, _checked=True), trans.get(va)))\n\t\t\t\t\telse:\n\t\t\t\t\t\tul.append(LI(INPUT(_value=va, _type=\'radio\', _name=tt, _onchange=ajax), trans.get(va)))\n\t\t\t\tdiv.append(ul)\n\n\t\t\ti = 0\n\t\texcept Exception, e:\n\t\t\treturn e\n\t\tprice = check_product(rps, list_shape)\n\n\t\tif price:\n\t\t\tdiv_warehouse, xnumber, house_name = list_warehouse(price[\'warehouse\'])\n\t\t\tdiv.append(div_warehouse)\n\t\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\n\t\t\tif price[\'price\'] != "":\n\t\t\t\tp_prod.append(SPAN(str(number_format(price[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\telse:\n\t\t\t\tp_prod.append(SPAN(\'Li\xc3\xaan h\xe1\xbb\x87\'))\n\t\t\tdiv.append(p_prod)\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\n\t\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max=100, _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\t\tdiv.append(div_btn)\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\t\tdiv_btn.append(BUTTON(SPAN(_class=\'card_now\'), \'Mua ngay\', _class="SP_HOT_List_BOX_text_button btn", _type=\'submit\', _style="margin-top: -7px;margin-left: 10px;"))\n\n\t\t\t# Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\n\t\t\tdiv_btn.append(DIV(SPAN(_class=\'card_now\'), \'Th\xc3\xaam v\xc3\xa0o gi\xe1\xbb\x8f h\xc3\xa0ng\', _class="btn_add_cart btn", _style="margin-top: -7px;margin-left: 10px;", _id=\'addProductToCart\'))\n\t\t\tajaxAddCart = "ajax(\'%s\', [\'kho_hang\', \'quantity\'], \'_blank\')" % (URL(c=\'plugin_app\', f=\'add_product_to_cart\', vars=dict(pid=price[\'product_sub\'])))\n\t\t\tdiv_btn.append(DIV(_style=\'display:none\', _onclick=ajaxAddCart, _id=\'addProductToCartHid\'))\n\t\t\tscript = """$(\'#addProductToCart\').click(function(){\n\t\t\t\t\t\t\tshowModal();\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t$("#addProductToCartHid").trigger(\'click\');\n\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t});"""\n\t\t\tdiv_btn.append(XML(SCRIPT(script)))\n\n\t\t\tdiv.append(div_btn)\n\n\t\t\tdiv = DIV(FORM(div, _action=URL(a=\'cms\', c=\'portal\', f=\'add_cart_r_number\', vars=dict(pid=price[\'product_sub\']))))\n\n\t\telse:\n\t\t\tp_prod = P(B("Gi\xc3\xa1 b\xc3\xa1n: "), _class="prod_price jshop_price col-lg-12 row")\n\n\t\t\tif row_s[\'price\'] != "":\n\t\t\t\tif row_s[\'product_unit\'] != "":\n\t\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\t\telse:\n\t\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'price\'])) + \' \xc4\x91\', _class=\'block_price\'))\n\t\t\telse:\n\t\t\t\tp_prod.append(SPAN(\'Li\xc3\xaan h\xe1\xbb\x87\'))\n\t\t\tif row_s[\'old_price\'] != "":\n\t\t\t\tp_prod.append(SPAN(str(number_format(row_s[\'old_price\'])) + \' \xc4\x91\', _class=\'old_price\'))\n\t\t\tdiv.append(p_prod)\n\n\t\t\tdiv.append(DIV(_id=\'alert_thuoc_tinh\', _class=\'row alert_thuoc_tinh\'))\n\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\n\t\t\tdiv_btn.append(DIV(INPUT(_type="button", _value="-", _class="minus"), INPUT(_type="number", _step="1", _min="1", _max="", _name="quantity", _value="1", _title="Qty", _class="input-text qty text", _size="4", _pattern=""), INPUT(_type="button", _value="+", _class="plus"), _class="quantity buttons_added"))\n\t\t\tdiv.append(div_btn)\n\t\t\tdiv_btn = DIV(_class=\'prod_buttons\')\n\t\t\tdiv_btn.append(I(\'(*) Vui l\xc3\xb2ng ch\xe1\xbb\x8dn thu\xe1\xbb\x99c t\xc3\xadnh\', _style=\'color: #f00;font-size: 12px;\'))\n\n\t\t\t# div_btn.append(SPAN(A(SPAN(_class=\'card_now\'), \'Mua h\xc3\xa0ng\', _class="SP_HOT_List_BOX_text_button", _onclick="fillData()"), _class="btn_add"))\n\t\t\tdiv.append(div_btn)\n\n\tscr = \'\'\'\n\t<script>\n\tfunction wcqib_refresh_quantity_increments() {\n\t\tjQuery("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").each(function(a, b) {\n\t\t\tvar c = jQuery(b);\n\t\t\tc.addClass("buttons_added"), c.children().first().before(\'<input type="button" value="-" class="minus" />\'), c.children().last().after(\'<input type="button" value="+" class="plus" />\')\n\t\t})\n\t}\n\n\tString.prototype.getDecimals || (String.prototype.getDecimals = function() {\n\t\tvar a = this,\n\t\t\tb = ("" + a).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n\t\treturn b ? Math.max(0, (b[1] ? b[1].length : 0) - (b[2] ? +b[2] : 0)) : 0\n\t}), jQuery(document).ready(function() {\n\t\twcqib_refresh_quantity_increments()\n\t}), jQuery(document).on("updated_wc_div", function() {\n\t\twcqib_refresh_quantity_increments()\n\t}), jQuery(document).on("click", ".plus, .minus", function() {\n\t\tvar a = jQuery(this).closest(".quantity").find(".qty"),\n\t\t\tb = parseFloat(a.val()),\n\t\t\tc = parseFloat(a.attr("max")),\n\t\t\td = parseFloat(a.attr("min")),\n\t\t\te = a.attr("step");\n\t\tb && "" !== b && "NaN" !== b || (b = 0), "" !== c && "NaN" !== c || (c = ""), "" !== d && "NaN" !== d || (d = 0), "any" !== e && "" !== e && void 0 !== e && "NaN" !== parseFloat(e) || (e = 1), jQuery(this).is(".plus") ? c && b >= c ? a.val(c) : a.val((b + parseFloat(e)).toFixed(e.getDecimals())) : d && b <= d ? a.val(d) : b > 0 && a.val((b - parseFloat(e)).toFixed(e.getDecimals())), a.trigger("change")\n\t});\n\n\t  let fillData = () => {\n        let ele = document.getElementById(\'alert_thuoc_tinh\');\n        ele.innerHTML = \'<div class="bottom_10 col-lg-12"> C\xe1\xba\xa7n ch\xe1\xbb\x8dn thu\xe1\xbb\x99c t\xc3\xadnh tr\xc6\xb0\xe1\xbb\x9bc khi \xc4\x91\xe1\xba\xb7t h\xc3\xa0ng </div>\';\n    }\n\t</script>\n\t\'\'\'\n\tdiv.append(XML(scr))\n\treturn div\n\n\ndef add_product_to_cart():\n\tkho_hang = request.vars.kho_hang\n\tpid = request.vars.pid\n\tar_carts = []\n\n\ttry:\n\t\tnum_carts = int(request.vars.quantity)\n\texcept:\n\t\tnum_carts = 1\n\tif request.cookies.has_key(\'cart_shop\'):\n\t\tcarts = eval(request.cookies[\'cart_shop\'].value)\n\t\ti = 0\n\t\tfor cart in carts:\n\t\t\tcart = eval(cart)\n\t\t\tif cart[\'id\'] == pid:\n\t\t\t\tar_carts.append(str({\'id\': str(cart[\'id\']), \'num\': str(int(cart[\'num\']) + num_carts), \'kho_hang\': kho_hang}))\n\t\t\t\ti += 1\n\t\t\telse:\n\t\t\t\tar_carts.append(str({\'id\': str(cart[\'id\']), \'num\': str(cart[\'num\']), \'kho_hang\': str(cart[\'kho_hang\'])}))\n\t\tif i == 0:\n\t\t\tar_carts.append(str({\'id\': pid, \'num\': str(num_carts), \'kho_hang\': kho_hang}))\n\telse:\n\t\tar_carts.append(str({\'id\': pid, \'num\': str(num_carts), \'kho_hang\': kho_hang}))\n\tresponse.cookies[\'cart_shop\'] = str(ar_carts)\n\tresponse.cookies[\'cart_shop\'][\'expires\'] = 24 * 3600\n\tresponse.cookies[\'cart_shop\'][\'path\'] = \'/\'\n\tresponse.flash = T("Add new cart!")\n\n\ndef add_quantity_product_to_cart():\n\tpid = request.vars.pid\n\tcount = request.vars.count\n\tar_carts = []\n\n\ttry:\n\t\tnum_carts = int(request.vars[\'fqty\' + str(count)])\n\texcept:\n\t\tnum_carts = 1\n\tif request.cookies.has_key(\'cart_shop\'):\n\t\tcarts = eval(request.cookies[\'cart_shop\'].value)\n\t\ti = 0\n\t\tfor cart in carts:\n\t\t\tcart = eval(cart)\n\t\t\tif cart[\'id\'] == pid:\n\t\t\t\tar_carts.append(str({\'id\': str(cart[\'id\']), \'num\': str(num_carts), \'kho_hang\': str(cart[\'kho_hang\'])}))\n\t\t\t\ti += 1\n\t\t\telse:\n\t\t\t\tar_carts.append(str({\'id\': str(cart[\'id\']), \'num\': str(cart[\'num\']), \'kho_hang\': str(cart[\'kho_hang\'])}))\n\tresponse.cookies[\'cart_shop\'] = str(ar_carts)\n\tresponse.cookies[\'cart_shop\'][\'expires\'] = 24 * 3600\n\tresponse.cookies[\'cart_shop\'][\'path\'] = \'/\'\n\tresponse.flash = T("Add new cart!")\n\n\ndef delete_product_to_cart():\n\tpid = request.vars.pid\n\tar_carts = []\n\tdiv = DIV()\n\n\tif request.cookies.has_key(\'cart_shop\'):\n\t\tcarts = eval(request.cookies[\'cart_shop\'].value)\n\t\ti = 0\n\t\tfor cart in carts:\n\t\t\tcart = eval(cart)\n\t\t\tif cart[\'id\'] != pid:\n\t\t\t\tar_carts.append(str({\'id\': str(cart[\'id\']), \'num\': str(cart[\'num\']), \'kho_hang\': str(cart[\'kho_hang\'])}))\n\n\tresponse.cookies[\'cart_shop\'] = str(ar_carts)\n\tresponse.cookies[\'cart_shop\'][\'expires\'] = 24 * 3600\n\tresponse.cookies[\'cart_shop\'][\'path\'] = \'/\'\n\tresponse.flash = T("Add new cart!")\n\n\ndef list_warehouse(warehouse, check=0):\n\txnumber = 0\n\thouse_name = \'.\'\n\tul = UL(LI("Kho", _class=\'is_first\'), _class=\'list_thuoc_tinh col-md-12 row\')\n\ti = 1\n\tfor house in warehouse:\n\t\t# ajax = "ajax(\'%s\', %s, \'wr_product_shape\')"%(URL(c=\'plugin_app\',f=\'product_shape\',args=request.args ),type_name)\n\t\tif check != 0:\n\t\t\tif (int(check) == house[\'id\']):\n\t\t\t\tul.append(LI(INPUT(_value=house[\'id\'], _type=\'radio\', _name=\'kho_hang\', _checked=True), house[\'name\']))\n\t\t\t\txnumber = house[\'xnumber_order\']\n\t\t\t\thouse_name = house[\'name\']\n\t\t\telse:\n\t\t\t\tul.append(LI(INPUT(_value=house[\'id\'], _type=\'radio\', _name=\'kho_hang\', _checked=False), house[\'name\']))\n\t\telse:\n\t\t\tif (i == 1):\n\t\t\t\tul.append(LI(INPUT(_value=house[\'id\'], _type=\'radio\', _name=\'kho_hang\', _checked=True), house[\'name\']))\n\t\t\t\txnumber = house[\'xnumber_order\']\n\t\t\t\thouse_name = house[\'name\']\n\t\t\telse:\n\t\t\t\tul.append(LI(INPUT(_value=house[\'id\'], _type=\'radio\', _name=\'kho_hang\', _checked=False), house[\'name\']))\n\t\ti += 1\n\tdiv = DIV(ul, _class=\'list_warehouse\')\n\tdiv.append(I("(*) Hi\xe1\xbb\x87n c\xc3\xb2n %s s\xe1\xba\xa3n ph\xe1\xba\xa9m trong kho %s" % (str(xnumber), house_name.encode(\'UTF-8\')), _class=\'col-lg-12 row\', _style="color: #f00;font-size: 12px;"))\n\treturn div, xnumber, house_name\n\n\ndef check_product(rps, list_shape):\n\tvao = request.vars\n\ttt = list_shape\n\tar = rps\n\tfor a in ar:\n\t\tcheck = 0\n\t\tfor t in tt:\n\t\t\tif str(a[t]) == str(vao[t]):\n\t\t\t\tcheck += 1\n\t\tif check == len(tt):\n\t\t\treturn a\n\treturn None\n\n\ndef list_menu(id):\n\timport requests\n\turl_folder = \'%s/api/v1/folder/%s.json?field=parent&order=display_order\' % (api_naso, id)\n\trf = requests.get(url_folder).json()\n\tr_folder = rf[\'result\']\n\tul = UL()\n\tfor f in r_folder:\n\t\tli = LI(A(f[\'label\'], _href=URL(c=\'portal\', f=\'folder\', args=[f[\'name\']])))\n\t\tli.append(list_menu(f[\'id\']))\n\t\tul.append(li)\n\treturn ul\n\n\ndef menu_mobile():\n\treturn list_menu(35)\n\n\ndef clear_cookie():\n\tresponse.cookies[\'cart_shop\'] = \'invalid\'\n\tresponse.cookies[\'cart_shop\'][\'expires\'] = -10\n\tresponse.cookies[\'cart_shop\'][\'path\'] = \'/\'\n\treturn "\xc4\x90\xc3\xa3 xo\xc3\xa1"\n\n\ndef check_van_chuyen():\n\ttry:\n\t\twarehouse = request.args(0)\n\t\tlist_product = request.vars[\'list_product_%s\' % warehouse]\n\t\tif request.vars[\'ward\']:\n\t\t\tToWardId = request.vars[\'ward\']\n\t\telif request.cookies[\'ward\'].value:\n\t\t\tToWardId = request.cookies[\'ward\'].value\n\t\telse:\n\t\t\tToWardId = \'\'\n\n\t\tif request.vars[\'district\']:\n\t\t\tToDistrictId = request.vars[\'district\']\n\t\telif request.cookies[\'district\'].value:\n\t\t\tToDistrictId = request.cookies[\'district\'].value\n\t\telse:\n\t\t\tToDistrictId = \'\'\n\t\tToAddress = request.vars[\'dia_chi\']\n\n\t\t# T\xe1\xbb\x95ng ti\xe1\xbb\x81n\n\t\ttemporaryPriceOrder = request.vars[\'temporaryPriceOrder_\' + warehouse] or 0\n\n\t\timport requests\n\t\turl = \'%s/api/find_services.json\' % (api_naso)\n\t\tdata = {\n\t\t\t"list_product": eval(list_product),\n\t\t\t"warehouse": warehouse,\n\t\t\t"ToDistrictId": ToDistrictId,\n\t\t\t"ToWardId": ToWardId,\n\t\t\t"ToAddress": ToAddress,\n\t\t\t"TotalAmount": temporaryPriceOrder,\n\t\t\t"ProductValue": temporaryPriceOrder,\n\t\t}\n\t\tx = requests.post(url, json=data)\n\t\tif x.status_code == 200:\n\t\t\treturn check_transport_radio_web(x.text, warehouse)\n\t\telse:\n\t\t\treturn x.text\n\texcept Exception, e:\n\t\treturn e\n\n\ndef check_transport_radio_web(text, warehouse):\n\tfrom plugin_app import number_format\n\timport json\n\tdata = json.loads(text)\n\tdiv = DIV()\n\ti = 0\n\tdivTransport = DIV()\n\tselectTransporter = SELECT(_name=\'ftransporter\' + str(warehouse), _id=\'ftransporter\' + str(warehouse), _class=\'form-control\')\n\tfor item in data:\n\t\t# item = json.loads(item)\n\t\tfor sv in item[\'availableServices\']:\n\t\t\tvalue = item[\'transporter\'] + \'|\' + sv[\'serviceId\'] + \'|\' + str(sv[\'serviceFee\'])\n\t\t\tselectTransporter.append(OPTION(SPAN(\'\xe2\x82\xab\', \'{:,}\'.format(int(sv[\'serviceFee\']))) if sv[\'serviceFee\'] else \'\', \'-\', item[\'fullName\'], \'(\', sv[\'name\'], \') \', _value=value))\n\t\t\ti += 1\n\tdivTransport.append(selectTransporter)\n\n\tscr = """\n\t<script>\n\t$("#ftransporter%s").change(function() {\n\t\tgia = $(this).val();\n\t\tl_gia = gia.split(\'|\')\n\t\t$("#van_chuyen_%s").val(parseInt(l_gia[2]).toLocaleString());\n\t\t$("#transportHidden_%s").val(gia);\n\t\thandlingTotal(%s);\n\t\thandlingTotalAmountAll();\n\t  }).trigger( "change" );\n\t</script>\n\t""" % (warehouse, warehouse, warehouse, warehouse)\n\tdivTransport.append(XML(scr))\n\treturn divTransport\n\nresponse._vars=response._caller(lead_add)\n'
p7
sS'snapshot'
p8
(dp9
S'exception'
p10
(dp11
S'__hash__'
p12
S"<method-wrapper '__hash__' of exceptions.ImportError object>"
p13
sS'__setattr__'
p14
S"<method-wrapper '__setattr__' of exceptions.ImportError object>"
p15
sS'__reduce_ex__'
p16
S'<built-in method __reduce_ex__ of exceptions.ImportError object>'
p17
sS'__getslice__'
p18
S"<method-wrapper '__getslice__' of exceptions.ImportError object>"
p19
sS'__getitem__'
p20
S"<method-wrapper '__getitem__' of exceptions.ImportError object>"
p21
sS'__setstate__'
p22
S'<built-in method __setstate__ of exceptions.ImportError object>'
p23
sS'__reduce__'
p24
S'<built-in method __reduce__ of exceptions.ImportError object>'
p25
sS'__str__'
p26
S"<method-wrapper '__str__' of exceptions.ImportError object>"
p27
sS'__format__'
p28
S'<built-in method __format__ of exceptions.ImportError object>'
p29
sS'__getattribute__'
p30
S"<method-wrapper '__getattribute__' of exceptions.ImportError object>"
p31
sS'__class__'
p32
S"<type 'exceptions.ImportError'>"
p33
sS'__unicode__'
p34
S'<built-in method __unicode__ of exceptions.ImportError object>'
p35
sS'__delattr__'
p36
S"<method-wrapper '__delattr__' of exceptions.ImportError object>"
p37
sS'__subclasshook__'
p38
S'<built-in method __subclasshook__ of type object>'
p39
sS'__repr__'
p40
S"<method-wrapper '__repr__' of exceptions.ImportError object>"
p41
sS'args'
p42
S'("Cannot import module \'applications.cms.modules.requests\'",)'
p43
sS'__dict__'
p44
S'{}'
p45
sS'__sizeof__'
p46
S'<built-in method __sizeof__ of exceptions.ImportError object>'
p47
sS'__doc__'
p48
S'"Import can\'t find module, or can\'t find name in module."'
p49
sS'__init__'
p50
S"<method-wrapper '__init__' of exceptions.ImportError object>"
p51
sS'__new__'
p52
S'<built-in method __new__ of type object>'
p53
ssS'evalue'
p54
S"Cannot import module 'applications.cms.modules.requests'"
p55
sS'request'
p56
cgluon.html
XML_unpickle
p57
(S's\x9a^\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">ajax</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">application</td><td style="vertical-align:top;">:</td><td><div>cms</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cid</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">controller</td><td style="vertical-align:top;">:</td><td><div>plugin_app</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">nobita-utm</td><td style="vertical-align:top;">:</td><td><div>e30=<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_cms</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">env</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_ENCODING</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br, zstd</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_LANGUAGE</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7,fr-FR;q=0.6,fr;q=0.5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONNECTION</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_COOKIE</td><td style="vertical-align:top;">:</td><td><div>nobita-utm=e30=; session_id_cms=127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_HOST</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_CH_UA</td><td style="vertical-align:top;">:</td><td><div>&quot;Not)A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;127&quot;, &quot;Chromium&quot;;v=&quot;127&quot;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_CH_UA_MOBILE</td><td style="vertical-align:top;">:</td><td><div>?0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_CH_UA_PLATFORM</td><td style="vertical-align:top;">:</td><td><div>&quot;Windows&quot;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_FETCH_DEST</td><td style="vertical-align:top;">:</td><td><div>document</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_FETCH_MODE</td><td style="vertical-align:top;">:</td><td><div>navigate</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_FETCH_SITE</td><td style="vertical-align:top;">:</td><td><div>none</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_SEC_FETCH_USER</td><td style="vertical-align:top;">:</td><td><div>?1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_UPGRADE_INSECURE_REQUESTS</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_USER_AGENT</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_INFO</td><td style="vertical-align:top;">:</td><td><div>/plugin_app/lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">QUERY_STRING</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_ADDR</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_PORT</td><td style="vertical-align:top;">:</td><td><div>56218</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_METHOD</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_NAME</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_NAME</td><td style="vertical-align:top;">:</td><td><div>DESKTOP-GUAHLA8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PORT</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PROTOCOL</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SOFTWARE</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;C:\\\\Users\\\\F6\\\\Downloads\\\\bahadi\\\\9026-py2\\\\applications\\\\cms\\\\&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x4322468: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;DESKTOP-GUAHLA8&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;C:\\\\Users\\\\F6\\\\Downloads\\\\bahadi\\\\9026-py2&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_encoding</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br, zstd</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_language</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7,fr-FR;q=0.6,fr;q=0.5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_connection</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_cookie</td><td style="vertical-align:top;">:</td><td><div>nobita-utm=e30=; session_id_cms=127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_host</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_ch_ua</td><td style="vertical-align:top;">:</td><td><div>&quot;Not)A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;127&quot;, &quot;Chromium&quot;;v=&quot;127&quot;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_ch_ua_mobile</td><td style="vertical-align:top;">:</td><td><div>?0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_ch_ua_platform</td><td style="vertical-align:top;">:</td><td><div>&quot;Windows&quot;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_fetch_dest</td><td style="vertical-align:top;">:</td><td><div>document</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_fetch_mode</td><td style="vertical-align:top;">:</td><td><div>navigate</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_fetch_site</td><td style="vertical-align:top;">:</td><td><div>none</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_sec_fetch_user</td><td style="vertical-align:top;">:</td><td><div>?1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_upgrade_insecure_requests</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_user_agent</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.1.93</div></td></tr><tr><td><div>fe80::7fed:a3c0:ee6e:c02e%3</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>DESKTOP-GUAHLA8</div></td></tr><tr><td><div>192.168.186.1</div></td></tr><tr><td><div>169.254.226.3</div></td></tr><tr><td><div>127.0.0.1</div></td></tr><tr><td><div>fe80::d487:29a4:871:bc6e%16</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_info</td><td style="vertical-align:top;">:</td><td><div>/plugin_app/lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">query_string</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_addr</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_port</td><td style="vertical-align:top;">:</td><td><div>56218</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_method</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_uri</td><td style="vertical-align:top;">:</td><td><div>/cms/plugin_app/lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_name</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_name</td><td style="vertical-align:top;">:</td><td><div>DESKTOP-GUAHLA8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_port</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_protocol</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_software</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_original_uri</td><td style="vertical-align:top;">:</td><td><div>/plugin_app/lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_path</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.21.1-stable+timestamp.2020.11.28.04.10.44</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x0337D0D0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x042A4B20&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x0B1135F0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x0337D0D0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x042A4B20&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x0B1135F0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">extension</td><td style="vertical-align:top;">:</td><td><div>html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">folder</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">function</td><td style="vertical-align:top;">:</td><td><div>lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">global_settings</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;C:\\\\Users\\\\F6\\\\Downloads\\\\bahadi\\\\9026-py2\\\\applications\\\\cms\\\\&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x4322468: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;DESKTOP-GUAHLA8&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;C:\\\\Users\\\\F6\\\\Downloads\\\\bahadi\\\\9026-py2&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.1.93</div></td></tr><tr><td><div>fe80::7fed:a3c0:ee6e:c02e%3</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>DESKTOP-GUAHLA8</div></td></tr><tr><td><div>192.168.186.1</div></td></tr><tr><td><div>169.254.226.3</div></td></tr><tr><td><div>127.0.0.1</div></td></tr><tr><td><div>fe80::d487:29a4:871:bc6e%16</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.21.1-stable+timestamp.2020.11.28.04.10.44</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_https</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_local</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_restful</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_scheduler</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_shell</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">now</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2024, 8, 20, 8, 49, 37, 143000)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">url</td><td style="vertical-align:top;">:</td><td><div>/plugin_app/lead_add</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">utcnow</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2024, 8, 20, 1, 49, 37, 143000)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi</td><td style="vertical-align:top;">:</td><td><div>&lt;gluon.main.LazyWSGI object at 0x0B10F250&gt;</div></td></tr></table></div>'
tRp58
sS'frames'
p59
(lp60
(dp61
S'file'
p62
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\restricted.py'
p63
sS'dump'
p64
(dp65
S'environment'
p66
S"{'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}"
p67
sS'ccode'
p68
S'<code object <module> at 0B3279B0, file "C:\\User...lications\\cms\\controllers/plugin_app.py", line 3>'
p69
ssS'lnum'
p70
I227
sS'lines'
p71
(dp72
I224
S'            ccode = code'
p73
sI225
S'        else:'
p74
sI226
S'            ccode = compile2(code, layer)'
p75
sI227
S'        exec ccode in environment'
p76
sI228
S'    except HTTP:'
p77
sI229
S'        raise'
p78
sI230
S'    except RestrictedError:'
p79
sI231
S'        # do not encapsulate (obfuscate) the original RestrictedError'
p80
sI222
S'    try:'
p81
sI223
S'        if isinstance(code, types.CodeType):'
p82
ssS'call'
p83
S'(code="# -*- coding: utf-8 -*-\\n \\napi_link = \'https://qu...sport\\n\\nresponse._vars=response._caller(lead_add)\\n", environment={\'A\': <class \'gluon.html.A\'>, \'ANY_OF\': <class \'gluon.validators.ANY_OF\'>, \'ASSIGNJS\': <function ASSIGNJS>, \'AppConfig\': <function AppConfig>, \'Auth\': <class \'gluon.tools.Auth\'>, \'B\': <class \'gluon.html.B\'>, \'BEAUTIFY\': <class \'gluon.html.BEAUTIFY\'>, \'BODY\': <class \'gluon.html.BODY\'>, \'BR\': <class \'gluon.html.BR\'>, \'BUTTON\': <class \'gluon.html.BUTTON\'>, ...}, layer=r\'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers/plugin_app.py\')'
p84
sS'func'
p85
S'restricted'
p86
sa(dp87
g62
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers\\plugin_app.py'
p88
sg64
(dp89
sg70
I1636
sg71
(dp90
I1632
S'\t""" % (warehouse, warehouse, warehouse, warehouse)'
p91
sI1633
S'\tdivTransport.append(XML(scr))'
p92
sI1634
S'\treturn divTransport'
p93
sI1625
S"\t\tl_gia = gia.split('|')"
p94
sI1626
S'\t\t$("#van_chuyen_%s").val(parseInt(l_gia[2]).toLocaleString());'
p95
sI1627
S'\t\t$("#transportHidden_%s").val(gia);'
p96
sI1628
S'\t\thandlingTotal(%s);'
p97
sI1629
S'\t\thandlingTotalAmountAll();'
p98
sI1630
S'\t  }).trigger( "change" );'
p99
sI1631
S'\t</script>'
p100
ssg83
S'()'
p101
sg85
S'<module>'
p102
sa(dp103
g62
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\globals.py'
p104
sg64
(dp105
S'self'
p106
S'undefined'
p107
sS'f'
S'<function lead_add>'
p108
ssg70
I417
sg71
(dp109
I416
S'        self._vars = None'
p110
sI417
S'        self._caller = lambda f: f()'
p111
sI418
S'        self._view_environment = None'
p112
sI419
S'        self._custom_commit = None'
p113
sI420
S'        self._custom_rollback = None'
p114
sI421
S"        self.generic_patterns = ['*']"
p115
sI412
S"        self.flash = ''            # used by the default view layout"
p116
sI413
S'        self.meta = Storage()      # used by web2py_ajax.html'
p117
sI414
S'        self.menu = []             # used by the default view layout'
p118
sI415
S'        self.files = []            # used by web2py_ajax.html'
p119
ssg83
S'(f=<function lead_add>)'
p120
sg85
S'<lambda>'
p121
sa(dp122
g62
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers\\plugin_app.py'
p123
sg64
(dp124
S'requests'
p125
g107
ssg70
I12
sg71
(dp126
I7
S'@auth.requires_login()'
p127
sI8
S'def index():'
p128
sI9
S"\treturn dict(content=H2('Plugin App'))"
p129
sI10
S''
sI11
S'def lead_add():'
p130
sI12
S'\timport requests'
p131
sI13
S"\turl = '%s/apiweb/lead_add.json' % (api_link)"
p132
sI14
S'\tdata = {'
p133
sI15
S'\t\t"name": request.vars.fname,'
p134
sI16
S'\t\t"phone": request.vars.fphone,'
p135
ssg83
S'()'
p136
sg85
S'lead_add'
p137
sa(dp138
g62
S'C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\custom_import.py'
p139
sg64
(dp140
S'builtinstr'
p141
S"<type 'str'>"
p142
sS'builtinImportError'
p143
S"<type 'exceptions.ImportError'>"
p144
sS'e'
S"KeyError('applications.cms.modules.requests',)"
p145
ssg70
I89
sg71
(dp146
I84
S'                        new_mod = base_importer('
p147
sI85
S'                            modules_prefix, globals, locals, [itemname], level)'
p148
sI86
S'                        try:'
p149
sI87
S"                            result = result or sys.modules[modules_prefix+'.'+itemname]"
p150
sI88
S'                        except KeyError, e:'
p151
sI89
S"                            raise ImportError, 'Cannot import module %s' % str(e)"
p152
sI90
S'                        modules_prefix += "." + itemname'
p153
sI91
S'                    return result'
p154
sI92
S'                else:'
p155
sI93
S'                    # import like "from x import a, b, ..."'
p156
ssg83
S"(name='requests', globals={'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}, locals={}, fromlist=[], level=-1)"
p157
sg85
S'custom_importer'
p158
sasS'pyver'
p159
S'Python 2.7.18: C:\\Python27\\python.exe (prefix: C:\\Python27)'
p160
sS'session'
p161
g57
(S's\xaf\x17\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">auth</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">expiration</td><td style="vertical-align:top;">:</td><td><div>3600</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">hmac_key</td><td style="vertical-align:top;">:</td><td><div>b78cb6b3-3d0f-41df-8e1b-b485d2d094cc</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_visit</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2024, 8, 20, 8, 49, 23, 782000)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remember_me</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">auth_group</td><td style="vertical-align:top;">:</td><td><div>7L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">created_by</td><td style="vertical-align:top;">:</td><td><div>1L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">created_on</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2016, 2, 24, 13, 47, 22)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">display_order</td><td style="vertical-align:top;">:</td><td><div>100L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">email</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">first_name</td><td style="vertical-align:top;">:</td><td><div>admin</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">id</td><td style="vertical-align:top;">:</td><td><div>1L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">image</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_name</td><td style="vertical-align:top;">:</td><td><div>user</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_id</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">reset_password_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">role</td><td style="vertical-align:top;">:</td><td><div>Qu\xe1\xba\xa3n tr\xe1\xbb\x8b</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">username</td><td style="vertical-align:top;">:</td><td><div>admin</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user_groups</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">1</td><td style="vertical-align:top;">:</td><td><div>Auth</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">2</td><td style="vertical-align:top;">:</td><td><div>public</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">3</td><td style="vertical-align:top;">:</td><td><div>admin</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">4</td><td style="vertical-align:top;">:</td><td><div>manager</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">5</td><td style="vertical-align:top;">:</td><td><div>user</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">6</td><td style="vertical-align:top;">:</td><td><div>editor</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">7</td><td style="vertical-align:top;">:</td><td><div>Qu\xe1\xba\xa3n tr\xe1\xbb\x8b h\xe1\xbb\x87 th\xe1\xbb\x91ng</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">8</td><td style="vertical-align:top;">:</td><td><div>Tin t\xe1\xbb\xa9c</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">9</td><td style="vertical-align:top;">:</td><td><div>Bi\xc3\xaan t\xe1\xba\xadp</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">10</td><td style="vertical-align:top;">:</td><td><div>T\xe1\xbb\x95ng bi\xc3\xaan t\xe1\xba\xadp</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">11</td><td style="vertical-align:top;">:</td><td><div>Bi\xc3\xaan t\xe1\xba\xadp 1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">12</td><td style="vertical-align:top;">:</td><td><div>T\xe1\xbb\x95ng bi\xc3\xaan t\xe1\xba\xadp1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">13</td><td style="vertical-align:top;">:</td><td><div>V\xc4\x83n b\xe1\xba\xa3n</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">14</td><td style="vertical-align:top;">:</td><td><div>V\xc4\x83n th\xc6\xb0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">15</td><td style="vertical-align:top;">:</td><td><div>Ch\xc3\xa1nh v\xc4\x83n ph\xc3\xb2ng</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">16</td><td style="vertical-align:top;">:</td><td><div>V\xc4\x83n th\xc6\xb0 1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">17</td><td style="vertical-align:top;">:</td><td><div>Ch\xc3\xa1nh v\xc4\x83n ph\xc3\xb2ng 1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">18</td><td style="vertical-align:top;">:</td><td><div>L\xe1\xbb\x8bch l\xc3\xa0m vi\xe1\xbb\x87c</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">19</td><td style="vertical-align:top;">:</td><td><div>T\xe1\xba\xa1o l\xe1\xbb\x8bch</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">20</td><td style="vertical-align:top;">:</td><td><div>Duy\xe1\xbb\x87t l\xe1\xbb\x8bch</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">21</td><td style="vertical-align:top;">:</td><td><div>Chi c\xe1\xbb\xa5c</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">22</td><td style="vertical-align:top;">:</td><td><div>V\xc4\x83n ph\xc3\xb2ng</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div>'
tRp162
sS'etype'
p163
S"<type 'exceptions.ImportError'>"
p164
sS'date'
p165
S'Tue Aug 20 08:49:37 2024'
p166
sS'response'
p167
g57
(S's\x82\x17\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">body</td><td style="vertical-align:top;">:</td><td><div>&lt;cStringIO.StringO object at 0x0B10FD80&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_cms</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div>/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">delimiters</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>{{</div></td></tr><tr><td><div>}}</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">files</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">form_label_separator</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">formstyle</td><td style="vertical-align:top;">:</td><td><div>bootstrap3_inline</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generic_patterns</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>*</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">headers</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">X-Powered-By</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">menu</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">meta</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">models_to_run</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>^\\w+\\.py$</div></td></tr><tr><td><div>^plugin_app/\\w+\\.py$</div></td></tr><tr><td><div>^plugin_app/lead_add/\\w+\\.py$</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">postprocessing</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_compression_level</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_expires</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_data_name</td><td style="vertical-align:top;">:</td><td><div>session_data_cms</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_file</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;C:\\\\Users\\\\F6\\\\Downloads\\\\bahadi\\\\9026-py2\\\\applications\\\\cms\\\\sessions\\\\0a4\\\\19b\\\\127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457&#x27;, mode &#x27;rb+&#x27; at 0x0B102A70&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_filename</td><td style="vertical-align:top;">:</td><td><div>C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\sessions\\127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_hash</td><td style="vertical-align:top;">:</td><td><div>1dbc4ed973a8120adf4ae5eb031018a8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-c99d9863-82fb-4a09-ba15-427384fc3457</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_name</td><td style="vertical-align:top;">:</td><td><div>session_id_cms</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_locked</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_masterapp</td><td style="vertical-align:top;">:</td><td><div>cms</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_new</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_storage_type</td><td style="vertical-align:top;">:</td><td><div>file</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">status</td><td style="vertical-align:top;">:</td><td><div>200</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">view</td><td style="vertical-align:top;">:</td><td><div>plugin_app/lead_add.html</div></td></tr></table></div>'
tRp168
sS'locals'
p169
(dp170
S'fromlist'
p171
S'[]'
p172
sS'e'
S"KeyError('applications.cms.modules.requests',)"
p173
sS'name'
p174
S"'requests'"
p175
sS'level'
p176
S'-1'
p177
sS'itemname'
p178
S"'requests'"
p179
sS'e3'
p180
S"ImportError('No module named requests',)"
p181
sS'base_importer'
p182
S'<built-in function __import__>'
p183
sS'globals'
p184
S"{'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}"
p185
sS'result'
p186
S'None'
p187
sS'items'
p188
S"['C:', 'Users', 'F6', 'Downloads', 'bahadi', '9026-py2', 'applications', 'cms']"
p189
sS'modules_prefix'
p190
S"'applications.cms.modules'"
p191
sS'new_mod'
p192
S"<module 'applications.cms.modules' from 'applications\\cms\\modules\\__init__.pyc'>"
p193
sS'e1'
p194
S'ImportError("Cannot import module \'applications.cms.modules.requests\'",)'
p195
sS'import_tb'
p196
S'None'
p197
sg169
g45
sS'oname'
p198
S"'requests'"
p199
sssS'traceback'
p200
S'Traceback (most recent call last):\n  File "C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers/plugin_app.py", line 1636, in <module>\n  File "C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\applications\\cms\\controllers/plugin_app.py", line 12, in lead_add\n    import requests\n  File "C:\\Users\\F6\\Downloads\\bahadi\\9026-py2\\gluon\\custom_import.py", line 89, in custom_importer\n    raise ImportError, \'Cannot import module %s\' % str(e)\nImportError: Cannot import module \'applications.cms.modules.requests\'\n'
p201
s.